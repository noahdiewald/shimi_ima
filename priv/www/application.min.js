/*! Dictionary Maker - v0.1.0 - 2013-09-26
* http://ling.wisc.edu/
* Copyright (c) 2013 UW Madison Board of Regents; Licensed GNU GPLv3 */

var globals={};require=function e(t,n,r){function i(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(s)return s(o,!0);throw Error("Cannot find module '"+o+"'")}var c=n[o]={exports:{}};t[o][0].call(c.exports,function(e){var n=t[o][1][e];return i(n?n:e)},c,c.exports,e,t,n,r)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;r.length>o;o++)i(r[o]);return i}({1:[function(t,e){e.exports,t("./jquery-ui-input-state.js");var n=t("./click-dispatch.js").clickDispatch,r=t("./dblclick-dispatch.js").dblclickDispatch,i=t("./changes.js").changes,s=t("./keystrokes.js").keystrokes,o=t("./form.js"),u=t("./documents/documents.js"),a=t("./file_manager/fm.js"),c=t("./index_tool/ilistingui.js"),l=t("./projects/projectui.js"),d=t("./config/config.js");String.prototype.isBlank=function(){"use strict";return/^\s*$/.test(this)&&!/\S/.test(this)},String.prototype.trim=function(){"use strict";return this.replace(/^\s+/,"").replace(/\s+$/,"")},Array.prototype.trimAll=function(){"use strict";return this.map(function(t){return t.trim()}).filter(function(t){return!t.match(/^$/)})},$(function(){"use strict";$("body").click(function(t){n(t)}),$("body").dblclick(function(t){r(t)}),s(),i(),$(".notification").hide(),$("#loading").hide(),$(document).ajaxStart(function(){$("#loading").show()}).ajaxStop(function(){$("#loading").hide()}),o.initDateFields(),$("#all-config-container").length>0&&d.init(),$("#all-document-container").length>0&&u.init(),$("#file-upload").length>0&&a.init(),$("#all-index-container").length>0&&c.init(),$("#projects-container").length>0&&l.init()})},{"./changes.js":2,"./click-dispatch.js":3,"./config/config.js":8,"./dblclick-dispatch.js":18,"./documents/documents.js":22,"./file_manager/fm.js":30,"./form.js":32,"./index_tool/ilistingui.js":39,"./jquery-ui-input-state.js":43,"./keystrokes.js":45,"./projects/projectui.js":49}],2:[function(t,e,n){var r=t("./documents/searchui.js"),i=function(){"use strict";$(document).on("change","#document-search-exclude",function(){return r.toggleExclusion(),!0}),$(document).on("change","#document-search-invert",function(){return r.toggleInversion(),!0})};n.changes=i},{"./documents/searchui.js":26}],3:[function(t,e,n){var r=t("./sender.js"),i=t("./dispatcher.js").dispatcher,s=t("./panel-toggle.js").panelToggler,o=t("./documents/editui.js"),u=t("./documents/viewui.js"),a=t("./documents/indexui.js"),c=t("./documents/setsui.js"),l=t("./documents/searchui.js"),d=t("./documents/worksheetui.js"),f=t("./documents/fieldsets.js"),p=t("./index_tool/ieditui.js"),b=t("./form.js"),h=t("./projects/projectui.js"),v=t("./file_manager/fm.js"),m=t("./config/maintenanceui.js"),g=t("./config/doctype-tab.js"),y=t("./config/charseq-tab").charseqTab,w=function(t){"use strict";var e=i({".edit-field-button":function(t){g.editField(t)},".delete-field-button":function(t){g.deleteField(t)},".add-field-button":function(t){g.addField(t)},".edit-fieldset-button":function(t){g.editFieldset(t)},".delete-fieldset-button":function(t){g.deleteFieldset(t)},".add-fieldset-button":function(t){g.addFieldset(t)},".delete-doctype-button":function(t){g.deleteDoctype(t)},".edit-doctype-button":function(t){g.editDoctype(t)},".touch-doctype-button":function(t){g.touchDoctype(t)},"#doctype-add-button":function(t){g.addDoctype(t)},".delete-charseq-button":function(t){y.del(t)},".edit-charseq-button":function(t){y.edit(t)},"#charseq-add-button":function(){y.add()},"#maintenance-upgrade-button":function(t){m.upgradeButton(t)},".add-button":function(t){f.initFieldset(t,!1,!0)},".remove-button":function(t){f.removeFieldset(t)},"#save-document-button":function(){o.save()},"#create-document-button":function(){o.create()},"#clear-document-button":function(){o.clear()},".expander":function(t){o.toggleTextarea(t)},"label span.ui-icon-help":function(t){o.showHelpDialog(t)},"#document-edit-button":function(t){u.edit(t)},"#document-delete-button":function(){u.confirmDelete()},"#document-restore-button":function(){u.confirmRestore()},"#document-view-tree > ul > li > b":function(t){u.collapseToggle(t)},".revision-link":function(t){u.fetchRevision(t)},"#search-all-fields-switch a":function(){l.allFields()},".search-field-item":function(t){l.removeField(t)},".select-results":function(t){l.toggleSelection(t)},"#save-search-results a":function(){$("#new-set-target-input").val("search"),$("#new-set-dialog").show()},"#save-set-results a":function(){$("#new-set-target-input").val("sets"),$("#new-set-dialog").show()},"#new-set-save-button":function(){r.sender("new-set-form-submit")},"#select-all-set-elements":function(t){c.toggleSelectAll(t)},".view-document-link span":function(t){var e=t[0].parentNode;a.load(e)},".view-document-link":function(t){a.load(t)},".select-worksheet-column":function(t){var e=$(t),n=e.is(":checked"),r=e.attr("data-field-field");d.columnSelection(r,n)},".select-worksheet-row":function(t){var e=$(t),n=e.is(":checked"),r=e.attr("data-row");d.rowSelection(r,n)},"#select-all-worksheet-rows":function(t){var e=$(t).is(":checked");d.selectAllRows(e)},"#toggle-handles":function(){d.showHandles()},".fieldset-handle":function(t){d.showFieldset($(t).attr("data-field-fieldset"))},".field-handle":function(t){d.showField($(t).attr("data-field-field"))},".field-header":function(t){d.hideField($(t).attr("data-field-field"))},"#new-index-button":function(){p.newCond()},".remove-condition-button":function(t){p.remCond(t)},"#delete-index-button":function(){p.del()},"#save-index-button":function(){p.save()},"#replace-button":function(){p.replace()},"#add-index-condition-button":function(){p.addCond()},"#index-index-listing a":function(t){p.init(t)},"#create-project":function(){h.add().dialog("open")},".project-delete-button":function(t){h.del(t)},"#up-dir":function(){v.upDir()},"#root-dir":function(){v.rootDir()},".dir":function(t){v.goDir(t)},".delete-file-button":function(t){v.deleteFile(t)},".edit-file-button":function(t){v.editFile(t)},".toggler":function(t){b.toggle(t)},".cancel-dialog":function(t){b.cancelDialog(t)},"#panel-toggle li":function(t){s(t)}});e(t)};n.clickDispatch=w},{"./config/charseq-tab":6,"./config/doctype-tab.js":11,"./config/maintenanceui.js":17,"./dispatcher.js":19,"./documents/editui.js":23,"./documents/fieldsets.js":24,"./documents/indexui.js":25,"./documents/searchui.js":26,"./documents/setsui.js":27,"./documents/viewui.js":28,"./documents/worksheetui.js":29,"./file_manager/fm.js":30,"./form.js":32,"./index_tool/ieditui.js":36,"./panel-toggle.js":47,"./projects/projectui.js":49,"./sender.js":55}],4:[function(t,e,n){var r=t("./charseq-elems.js").charseqElems,i=t("./charseq-tab.js").charseqTab,s=t("../form.js"),o=function(t){"use strict";var e=r.get(t),n=$("#charseq-dialog").dialog({width:650,autoOpen:!1,modal:!0,buttons:{Save:function(){var n=e.getCharseqInputVals(),r="config/charseqs",o="POST",u=function(t){i.init(),$(t).dialog("close")};t&&t.rev&&(o="PUT",r="config/charseqs/"+n._id+"?rev="+n.rev),s.send(r,n,o,u,this)},Cancel:function(){$(this).dialog("close")}},close:function(){e.clear()}});return n};n.charseqDialog=o},{"../form.js":32,"./charseq-elems.js":5,"./charseq-tab.js":6}],5:[function(t,e,n){var r=t("../form.js"),i=function(){"use strict";var t={};return t.attrs=["description","characters","name","sort_ignore","locale","tailoring","vowels","consonants","ietf_tag","iso639_tag","charseq","rev"],t.get=function(e){var n={};return n.attrs=t.attrs,n.copyValues=function(t){return Object.keys(t).forEach(function(e){n[e].val(t[e])}),n},n.getCharseqInputVals=function(){var t={category:"charseq",description:n.description.val(),characters:n.parse(n.characters.val()),name:n.name.val(),sort_ignore:n.parse(n.sort_ignore.val()),locale:n.locale.val(),tailoring:n.tailoring.val(),vowels:n.parse(n.vowels.val()),consonants:n.parse(n.consonants.val()),ietf_tag:n.ietf_tag.val(),iso639_tag:n.iso639_tag.val(),_id:n.charseq.val()||void 0,rev:n.rev.val()||void 0};return t},n.parse=function(t){return t&&!t.isBlank()?JSON.parse(t):[]},n.clear=function(){return r.clear($("#charseq-dialog .input")).removeClass("ui-state-error"),n},n.attrs.forEach(function(t){n[t]=$("#charseq-"+t+"-input")}),e&&n.copyValues(e),n},t}();n.charseqElems=i},{"../form.js":32}],6:[function(t,e,n){var r=t("./charseq-dialog.js").charseqDialog,i=t("./charseq-elems.js").charseqElems,s=t("../store.js").store,o=t("../form.js"),u=function(){"use strict";var t={};return t.add=function(){return r().dialog("open"),t},t.edit=function(e){var n={},o=i.attrs;return o.forEach(function(t){n[t]=s(e).get64("charseq-"+t)}),r(n).dialog("open"),t},t.del=function(e){var n=s(e),r=n.get("charseq-charseq"),i=n.get("charseq-rev"),u="config/charseqs/"+r+"?rev="+i,a=function(){t.init()};return window.confirm("Are you sure? This is permanent.")&&o.send(u,{},"DELETE",a,this),t},t.init=function(){var e=$("#charseq-tabs"),n=$("#charseq-tabs-headings"),r="config/charseqs";return e.tabs(),$.get(r,function(t){n.empty(),n.find(".ui-tabs-panel").remove(),e.tabs("destroy"),n.html(t),e.tabs()}),t},t}();n.charseqTab=u},{"../form.js":32,"../store.js":57,"./charseq-dialog.js":4,"./charseq-elems.js":5}],7:[function(t,e,n){t("templates.js");var r=t("../pager.js").pager,i=function(){"use strict";return"charseqs"},s=function(){"use strict";var t="config/"+i(),e=document.getElementById(i()+"-listing");return r({prefix:i(),url:t,target:e}).get(),"charseq-listing-requested"},o=function(){"use strict";return s(),"charsequi-initialized"};n.init=o,n.get=s,n.prefix=i},{"../pager.js":46,"templates.js":"e8H8MT"}],8:[function(t,e,n){var r=t("./doctypeui.js"),i=t("./maintenanceui.js"),s=t("./charsequi.js"),o=function(){"use strict";return r.init(),s.init(),i.init(),"config-initialized"};n.init=o},{"./charsequi.js":7,"./doctypeui.js":12,"./maintenanceui.js":17}],9:[function(t,e,n){var r=t("./doctype-elems.js").doctypeElems,i=t("./doctype-tab.js"),s=function(t,e){"use strict";var n=r.get(e);e.rev&&!e.rev.isBlank()?n.doctype.attr("disabled","disabled"):n.doctype.removeAttr("disabled");var s=$("#doctype-dialog").dialog({autoOpen:!1,modal:!0,buttons:{Save:function(){var r=n.getDoctypeInputVals(),s=function(t){i.init(),$(t).dialog("close")};!e.rev||e.rev.isBlank()?t.post(r,s,this):(r._id=t.doctype,t.put(r,s,this))},Cancel:function(){$(this).dialog("close")}},close:function(){n.clear()}});return s};n.doctypeDialog=s},{"./doctype-elems.js":10,"./doctype-tab.js":11}],10:[function(t,e,n){var r=t("../form.js"),i=function(){"use strict";var t={};return t.attrs=["description","doctype","rev"],t.get=function(e){var n={};return n.copyValues=function(t){return Object.keys(t).forEach(function(e){n[e].val(t[e])}),n},n.getDoctypeInputVals=function(){var t={category:"doctype",description:n.description.val(),_id:n.doctype.val()};return t},n.clear=function(){return r.clear($("#doctype-dialog .input")).removeClass("ui-state-error"),n},t.attrs.forEach(function(t){n[t]=$("#doctype-"+t+"-input")}),n.copyValues(e),n},t}();n.doctypeElems=i},{"../form.js":32}],11:[function(t,e,n){var r=t("./doctype-dialog.js").doctypeDialog,i=t("./doctype-elems.js").doctypeElems,s=t("./field-dialog.js").fieldDialog,o=t("./field-elems.js").fieldElems,u=t("./fieldset-dialog.js").fieldsetDialog,a=t("./fieldset-elems.js").fieldsetElems,c=t("../store.js").store,l=t("../path.js").path,d=function(t,e){"use strict";return l(t,e,"config")},f=function(t){"use strict";return t.field=!1,$.get(""+t,function(e){var n=$("#fields-"+t.fieldset);n.empty(),n.html(e)}),!0},p=function(t){"use strict";$.get(""+t,function(e){var n=$("#fieldsets-"+t.doctype);n.empty(),n.accordion(),n.accordion("destroy"),n.html(e),n.accordion({autoHeight:!1,collapsible:!0,active:!1})})},b=function(){"use strict";var t="config/doctypes";$("#doctype-tabs").tabs(),$.get(t,function(t){$("#fieldset-doctype-input"),$("#doctype-tabs-headings").empty(),$("#doctype-tabs-headings + .ui-tabs-panel").remove(),$("#doctype-tabs").tabs("destroy"),$("#doctype-tabs-headings").html(t);var e=function(t,e){var n=$(e.panel).children("div[data-fieldset-doctype]"),r=l(n,"fieldset","config");p(r)};$("#doctype-tabs").tabs({load:function(t,n){e(t,n)}})})},h=function(t){"use strict";var e=d(t,"field"),n={},r=o.attrs,i="config/charseqs?as=options";$.get(i,function(i){$("#field-charseq-input").html(i),r.forEach(function(e){n[e]=c(t).get("field-"+e)}),s(e,n).dialog("open")})},v=function(t){"use strict";var e=window.confirm("Are you sure? This is permanent.");if(e){var n=d(t,"field"),r=function(){n.field=!1,n.rev=!1,f(n)};n.del(r,this)}},m=function(t){"use strict";var e=d(t,"field"),n="config/charseqs?as=options";$.get(n,function(t){$("#field-charseq-input").html(t),s(e,{fieldset:e.fieldset,doctype:e.doctype}).dialog("open")})},g=function(t){"use strict";var e=d(t,"fieldset"),n={},r=a.attrs;r.forEach(function(e){n[e]=c(t).get("fieldset-"+e)}),u(e,n).dialog("open")},y=function(t){"use strict";var e=d(t,"fieldset"),n=function(){e.fieldset=!1,e.rev=!1,p(e)};window.confirm("Are you sure? This is permanent.")&&e.del(n,this)},w=function(t){"use strict";var e=d(t,"fieldset");u(e,{doctype:e.doctype}).dialog("open")},j=function(t){"use strict";var e=d(t,"doctype"),n={},s=i.attrs;s.forEach(function(e){n[e]=c(t).get("doctype-"+e)}),r(e,n).dialog("open")},x=function(t){"use strict";var e=c(t).get("doctype-doctype");$.post("config/doctypes/"+e+"/touch"),window.alert("Touch In Progress")},k=function(t){"use strict";var e=d(t,"doctype"),n=function(){e.doctype=!1,e.rev=!1,b()};window.confirm("Are you sure? This is permanent.")&&e.del(n,this)},_=function(t){"use strict";var e=d(t,"doctype");r(e,{}).dialog("open")};n.initFields=f,n.initFieldsets=p,n.init=b,n.editField=h,n.deleteField=v,n.addField=m,n.editFieldset=g,n.deleteFieldset=y,n.addFieldset=w,n.editDoctype=j,n.touchDoctype=x,n.deleteDoctype=k,n.addDoctype=_},{"../path.js":48,"../store.js":57,"./doctype-dialog.js":9,"./doctype-elems.js":10,"./field-dialog.js":13,"./field-elems.js":14,"./fieldset-dialog.js":15,"./fieldset-elems.js":16}],12:[function(t,e,n){t("templates.js");var r=t("../pager.js").pager,i=function(){"use strict";return"doctypes"},s=function(){"use strict";var t="config/"+i(),e=document.getElementById(i()+"-listing");return r({prefix:i(),url:t,target:e}).get(),"doctype-listing-requested"},o=function(){"use strict";return s(),"doctypeui-initialized"};n.init=o,n.get=s,n.prefix=i},{"../pager.js":46,"templates.js":"e8H8MT"}],13:[function(t,e,n){var r=t("./field-elems.js").fieldElems,i=t("./doctype-tab.js"),s=function(t,e){"use strict";var n=r.get(e),s=$("#field-dialog").dialog({autoOpen:!1,modal:!0,buttons:{Save:function(){var r=n.clearDisabled().getFieldInputVals(),s=function(e){i.initFields(t),$(e).dialog("close")};!e.rev||e.rev.isBlank()?t.post(r,s,this):(r._id=t.field,t.put(r,s,this))},Cancel:function(){$(this).dialog("close")}},close:function(){n.clear()}});return s};n.fieldDialog=s},{"./doctype-tab.js":11,"./field-elems.js":14}],14:[function(t,e,n){var r=t("../form.js"),i=t("../utils.js"),s=function(){"use strict";var t={};return t.attrs=["name","label","order","description","subcategory","head","reversal","default","required","allowed","source","max","min","regex","doctype","fieldset","charseq","rev","field"],t.get=function(e){var n={};return n.attrs=t.attrs,n.notDefault=function(){return[n.charseq,n.allowed,n.source,n.min,n.max,n.regex]},n.disable=function(){return n.notDefault().forEach(function(t){t.attr("disabled","disabled")}),n},n.clearDisabled=function(){return n.notDefault().forEach(function(t){t.attr("disabled")&&t.val("")}),n},n.copyValues=function(t){return Object.keys(t).forEach(function(e){n[e].val(t[e]),n[e].is("input[type=checkbox]")&&"true"===t[e]&&n[e].prop("checked",!0)}),n},n.getFieldInputVals=function(){var t={category:"field",name:n.name.val(),label:n.label.val(),"default":n.decodeDefaults(n.subcategory.val(),n["default"].val()),head:n.head.is(":checked"),reversal:n.reversal.is(":checked"),required:n.required.is(":checked"),order:1*n.order.val(),allowed:n.allowed.val().split(",").trimAll(),source:n.decodeSource(n.subcategory.val(),n.source.val()),min:n.decodeBound(n.subcategory.val(),n.min.val()),max:n.decodeBound(n.subcategory.val(),n.max.val()),regex:n.regex.val(),description:n.description.val(),charseq:n.charseq.val(),doctype:n.doctype.val(),fieldset:n.fieldset.val(),subcategory:n.subcategory.val()};return t},n.clear=function(){return r.clear($("#field-dialog .input")).removeClass("ui-state-error"),n.disable(),n},n.decodeBound=function(t,e){return"date"===t?e:i.stringToNumber(e)},n.decodeSource=function(t,e){return"file"===t?e.split("/").trimAll():e},n.decodeDefaults=function(t,e){switch(t){case"docmultiselect":case"multiselect":return e.split(",").trimAll();case"file":return e.split("/").trimAll();default:return e}},n.displayFields=function(t){switch(t){case"select":case"multiselect":n.disable(),n.allowed.removeAttr("disabled");break;case"docselect":case"docmultiselect":case"file":n.disable(),n.source.removeAttr("disabled");break;case"text":case"textarea":n.disable(),n.charseq.removeAttr("disabled"),n.regex.removeAttr("disabled");break;case"date":case"integer":case"rational":n.disable(),n.min.removeAttr("disabled"),n.max.removeAttr("disabled");break;default:n.disable()}},n.attrs.forEach(function(t){n[t]=$("#field-"+t+"-input")}),n.copyValues(e),n.displayFields(n.subcategory.val()),n.subcategory.change(function(){n.displayFields(n.subcategory.val())}),n},t}();n.fieldElems=s},{"../form.js":32,"../utils.js":58}],15:[function(t,e,n){var r=t("./fieldset-elems.js").fieldsetElems,i=t("./doctype-tab.js"),s=function(t,e){"use strict";var n=r.get(e),s=$("#fieldset-dialog").dialog({autoOpen:!1,modal:!0,buttons:{Save:function(){var r=n.getFieldsetInputVals(),s=function(e){t.fieldset=!1,t.rev=!1,i.initFieldsets(t),$(e).dialog("close")};!e.rev||e.rev.isBlank()?t.post(r,s,this):(r._id=t.fieldset,t.put(r,s,this))},Cancel:function(){$(this).dialog("close")}},close:function(){n.clear()}});return s};n.fieldsetDialog=s},{"./doctype-tab.js":11,"./fieldset-elems.js":16}],16:[function(t,e,n){var r=t("../form.js"),i=function(){"use strict";var t={};return t.attrs=["name","label","order","description","doctype","rev","multiple","collapse","fieldset"],t.get=function(e){var n={};return n.attrs=t.attrs,n.copyValues=function(t){return Object.keys(t).forEach(function(e){n[e].val(t[e]),n[e].is("input[type=checkbox]")&&"true"===t[e]&&n[e].attr("checked",!0)}),n},n.getFieldsetInputVals=function(){var t={category:"fieldset",name:n.name.val(),label:n.label.val(),order:1*n.order.val(),description:n.description.val(),doctype:n.doctype.val(),multiple:n.multiple.is(":checked"),collapse:n.collapse.is(":checked")};return t},n.clear=function(){return r.clear($("#fieldset-dialog .input")).removeClass("ui-state-error"),n},n.attrs.forEach(function(t){n[t]=$("#fieldset-"+t+"-input")}),n.copyValues(e),n},t}();n.fieldsetElems=i},{"../form.js":32}],17:[function(t,e,n){var r=t("templates.js"),i=t("../form.js"),s=t("../flash.js"),o=function(){"use strict";return i.send("config/upgrade","null","POST",function(){s.highlight("Task Started","Upgrade Project")}),"upgrade-initiated"},u=function(){"use strict";var t=r["config-maintenance"]();return document.getElementById("config-maintenance").insertAdjacentHTML("beforeend",t),"maintenanceui-initialized"};n.init=u,n.upgradeButton=o},{"../flash.js":31,"../form.js":32,"templates.js":"e8H8MT"}],18:[function(t,e,n){var r=t("./dispatcher.js").dispatcher,i=t("./panel-toggle.js").panelToggler,s=t("./documents/searchui.js"),o=t("./documents/worksheetui.js"),u=function(t){"use strict";var e=r({".search-result-field-id a":function(t){s.addField($(t).parent("h5"))},".field-view b":function(t){s.addField($(t).parent("li"))},".field-container label span":function(t){s.addField($(t).parent("label").parent("div"))},"#index-index-input-label":function(){s.addIndex()},".panel > h2":function(t){i(t)},"#toggle-handles":function(){o.hideHandles()},".fieldset-handle":function(t){o.hideFieldset($(t).attr("data-field-fieldset"))},".field-handle":function(t){o.hideField($(t).attr("data-field-field"))}});e(t)};n.dblclickDispatch=u},{"./dispatcher.js":19,"./documents/searchui.js":26,"./documents/worksheetui.js":29,"./panel-toggle.js":47}],19:[function(t,e,n){var r=function(t){"use strict";var e=function(e){var n=$(e.target);Object.keys(t).forEach(function(e){if(n.is(e)){var r=t[e];r(n)}})};return e};n.dispatcher=r},{}],20:[function(t,e,n){var r=t("../pager.js").pager,i=function(){"use strict";return"changelog"},s=function(){"use strict";var t=i(),e=document.getElementById(i()+"-listing"),n=function(t){var e=JSON.parse(t);return e.rows.map(function(t){t.doc.changes&&(t.doc.changes=Object.keys(t.doc.changes).map(function(e){return t.doc.changes[e]}))}),e};return r({prefix:i(),url:t,format:n,target:e}).get(),!0};n.prefix=i,n.get=s},{"../pager.js":46}],21:[function(t,e,n){var r=t("./editui.js"),i=t("../sender.js"),s=function(){"use strict";return document.getElementById("edit-command-input")},o=function(){"use strict";return $("#command-dialog")},u=function(t,e){"use strict";return t.attr("data-last-active",e)},a=function(t){"use strict";return t.attr("data-last-active")},c=function(t){"use strict";var e=!0;switch(t){case"w":case"clear":r.clear();break;case"c":case"create":r.create(),e=!1;break;case"s":case"save":r.save();break;case"d":case"delete":$("#document-view").show(),"none"!==$("#document-delete-button").css("display")&&$("#document-delete-button").click();break;case"e":case"edit":$("#document-view").show(),"none"!==$("#document-edit-button").css("display")&&($("#document-edit-button").click(),e=!1);break;case"r":case"restore":$("#document-view").show(),"none"!==$("#document-restore-button").css("display")&&$("#document-restore-button").click()}if(e){var n=o(),s=a(n);$("#"+s).focus()}else i.sender("lost-focus");return i.sender("executed-command"),!0},l=function(t){"use strict";var e=s(),n=o();return e.value="",u(n,t).show(),e.focus(),!0},d=function(){"use strict";var t=s(),e=o();return u(e,"").hide(),t.value="",!0};n.execute=c,n.dialogOpen=l,n.dialogClose=d},{"../sender.js":55,"./editui.js":23}],22:[function(t,e,n){var r,i=t("./setsui.js"),s=t("./editui.js"),o=t("./viewui.js"),u=t("./indexui.js"),a=t("./changeui.js"),c=t("../sender.js"),l=t("../store.js").store,d=function(){"use strict";return $("#index-filter-form select").change(function(){u.get()}),!0},f=function(t){"use strict";return t&&o.get(t),!0},p=function(){"use strict";return document.getElementById("all-document-container")},b=function(){"use strict";return r()+"_version"},h=function(){"use strict";return r()+"_info"},v=function(){"use strict";return r()+"_labels"},m=function(t){"use strict";return sessionStorage.setItem(h(),t),c.sender("doctype-info-ready")},g=function(){"use strict";return sessionStorage.getItem(b())},y=function(){"use strict";return l(p()).d("version")},w=function(){"use strict";return g()&&g()===y()},j=function(){"use strict";return null!==sessionStorage.getItem(h())},x=function(){"use strict";return null!==sessionStorage.getItem(v())},k=function(){"use strict";return sessionStorage.setItem(b(),y()),c.sender("version-set"),!0},_=function(){"use strict";var t;return t=w()&&j()&&x()?c.sender("labels-ready"):c.sender("bad-session-state")},S=function(){"use strict";return l(p()).d("doctype")},E=function(){"use strict";var t=document.getElementById("container");return l(t).get("project-id")},I=function(){"use strict";return sessionStorage.clear(),c.sender("session-cleared"),!0};r=function(){"use strict";return E()+"_"+S()};var T=function(){"use strict";return JSON.parse(sessionStorage.getItem(h()))},C=function(){"use strict";return $.getJSON("./",function(t){m(JSON.stringify(t))}),!0},A=function(){"use strict";var t=T(),e={};return t.fieldsets.forEach(function(t){t.fields.forEach(function(n){e[n._id]=[t.label,n.label]})}),sessionStorage.setItem(v(),JSON.stringify(e)),c.sender("labels-ready")},O=function(){"use strict";$("form").on("submit",function(){return!1}),_(),i.updateSelection(),u.iOpts(),u.get(),d(),s.init(),f($(location)[0].hash.split("#")[1]),a.get()};n.setVersion=k,n.clearSession=I,n.identifier=r,n.info=T,n.loadDoctype=C,n.makeLabels=A,n.init=O},{"../sender.js":55,"../store.js":57,"./changeui.js":20,"./editui.js":23,"./indexui.js":25,"./setsui.js":27,"./viewui.js":28}],23:[function(t,e,n){var r,i=t("../store.js").store,s=t("../form.js"),o=t("../flash.js"),u=t("./fieldsets.js"),a=t("./viewui.js"),c=t("./indexui.js"),l=function(){"use strict";return $("#save-document-button")},d=function(){"use strict";return $("#create-document-button")},f=function(){"use strict";return $("#document-edit-button")},p=function(t){"use strict";var e=JSON.parse(t.responseText),n=t.statusText,r=$("[data-field-instance="+e.instance+"]"),i=$("[href=#"+r.parents("fieldset").attr("id")+"]").parent("li");return i.addClass("ui-state-error"),r.addClass("ui-state-error"),o.error(n,e.fieldname+" "+e.message),!0},b=function(t){"use strict";var e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n=function(){return e.map(function(){return e[Math.floor(Math.random()*e.length)]}).join("")};return $("#last-added [data-field-instance]").each(function(e,r){var i=$(r).first(),s=i.attr("data-field-instance"),o=s;t&&(o=n()),i.attr("data-group-id",o),i.attr("id",o),i.attr("data-field-instance",o),i.next(".expander").attr("data-group-id",o),i.next().next(".expander").attr("data-group-id",o)}),t&&$("#last-added").removeAttr("id"),!0},h=function(){"use strict";var t="documents/edit";return $.get(t,function(t){$("#document-edit").html(t),$("#edit-tabs").tabs(),u.initFieldsets()}),!0},v=function(){"use strict";var t="input, select, textarea",e=function(){return $("#edit-tabs")},n=e().find(".ui-tabs-active a").attr("href");return $(n).find(t).first().focus(),!0},m=function(t){"use strict";return r(t),!0},g=function(){"use strict";var t=["data-document-id","data-document-rev"];return t.forEach(function(t){l().attr(t,f().attr(t))}),l().show(),r(),!0};r=function(t){"use strict";return s.initDateFields(),b(t),!0};var y=function(){"use strict";return $(".field").each(function(){var t=$(this),e=t.attr("data-field-default");e&&""!==e?t.is("select.multiselect")?t.val(e.split(",")):t.is("input.boolean")?t.attr("checked",e===!0):t.val(e):(t.val(""),t.removeAttr("checked"))}),!0},w=function(){"use strict";if(l().hasClass("oldrev")&&!window.confirm("This data is from an older version of this document. Are you sure you want to restore it?"))return!1;var t,e,n=i(l()),r=$("#edit-document-form"),s=n.d("document"),d=n.d("rev"),f="./documents/"+s+"?rev="+d,b=$("#first-index-element").attr("data-first-key"),h=$("#first-index-element").attr("data-first-id"),v={doctype:n.d("doctype"),description:n.d("description")};$("#edit-document-form .ui-state-error").removeClass("ui-state-error"),l().hide(),$.extend(v,u.fieldsetsToObject(r)),$.ajax({type:"PUT",url:f,dataType:"json",contentType:"application/json",processData:!1,data:JSON.stringify(v),complete:function(n){204===n.status||200===n.status?(e="Success",t="Your document was saved.",a.get(s),c.get(b,h),o.highlight(e,t),l().removeClass("oldrev").show()):403===n.status?(p(n),l().show()):409===n.status&&(t=JSON.parse(n.responseText),e=n.statusText,o.error(e,t.message),l().hide())}})},j=function(){"use strict";var t=i(d()),e=$("#edit-document-form"),n=$("#first-index-element").attr("data-first-key"),r=$("#first-index-element").attr("data-first-id"),s={doctype:t.d("doctype"),description:t.d("description")};$("#edit-document-form .ui-state-error").removeClass("ui-state-error"),d().hide(),$.extend(s,u.fieldsetsToObject(e));var f=$.ajax({type:"POST",dataType:"json",contentType:"application/json",processData:!1,data:JSON.stringify(s),complete:function(t){if(201===t.status){var e="Success",i="Your document was created.",s=f.getResponseHeader("Location").match(/[a-z0-9]*$/);l().hide().attr("disabled","true"),$(".fields").remove(),u.initFieldsets(),a.get(s),c.get(n,r),o.highlight(e,i),d().show()}else 403===t.status&&(p(t),d().show())}})},x=function(){"use strict";$("#edit-document-form .ui-state-error").removeClass("ui-state-error"),l().hide().attr("disabled","disabled"),$(".fields").remove(),u.initFieldsets()},k=function(t){"use strict";var e=$("#"+t.attr("data-group-id"));return t.attr("id")===e.attr("data-group-id")?(e.toggleClass("expanded"),e.next().next("span").toggleClass("expanded")):(e.toggleClass("expanded"),t.toggleClass("expanded")),!0};n.init=h,n.selectInput=v,n.afterFreshRefresh=m,n.afterEditRefresh=g,n.afterRefresh=r,n.resetFields=y,n.save=w,n.create=j,n.clear=x,n.toggleTextarea=k},{"../flash.js":31,"../form.js":32,"../store.js":57,"./fieldsets.js":24,"./indexui.js":25,"./viewui.js":28}],24:[function(t,e,n){var r,i,s,o,u,a,c=t("../path.js").path,l=t("../store.js").store,d=t("../utils.js"),f=t("./editui.js"),p=function(t){"use strict";return $("#container-"+t)},b=function(t,e){"use strict";var n=c(t,e);return n.doctype=!1,n},h=function(t,e,n){"use strict";var r=null;r=sessionStorage.getItem(t),r?e(r):$.get(t,n)},v=function(t,e){"use strict";t=t.children(".field-container").children(".field");var n={fields:[]};return t.each(function(t,i){i=$(i);var o=l(i),u=s(i),a=o.f("instance");n.fields[t]={id:o.f("field"),name:o.f("name"),label:o.f("label"),head:"true"===o.f("head"),reversal:"true"===o.f("reversal"),required:"true"===o.f("required"),min:r(o.f("subcategory"),o.f("min")),max:r(o.f("subcategory"),o.f("max")),instance:a,charseq:o.f("charseq"),regex:o.f("regex"),order:1*o.f("order"),subcategory:o.f("subcategory"),value:u},e>=0&&(n.fields[t].index=e)}),n};r=function(t,e){"use strict";return"date"===t?e:d.stringToNumber(e)};var m=function(t){"use strict";switch(t){case"true":t=!0;break;case"false":t=!1;break;default:t=null}return t},g=function(t){"use strict";return d.isBlank(t)?t="":isNaN(t)||(t=1*t),t},y=function(t){"use strict";return t=t?t.map(function(t){return i(t)}):null};i=function(t){"use strict";return window.decodeURIComponent(t.replace(/\+/g," "))},s=function(t){"use strict";var e;switch(l(t).f("subcategory")){case"boolean":e=t.is("input:checkbox:checked");break;case"openboolean":e=m(t.val());break;case"integer":case"rational":e=g(t.val());break;case"multiselect":case"docmultiselect":e=y(t.val());break;case"select":case"docselect":e=i(t.val());break;default:e=t.val()}return e};var w=function(t,e,n){"use strict";var r=b(t,"field"),i=t.children(".fields").last(),s=function(t){n&&i.attr("id","last-added"),i.prepend(t),e&&e(i),f.afterFreshRefresh(n)},o=function(t){sessionStorage.setItem(r,t),s(t)};return h(""+r,s,o),!0},j=function(t){"use strict";t=$(t);var e=l(t).fs("fieldset"),n=$("#container-"+e);b(t,"fieldset"),n.html(""),t.find(".multifield").each(function(t,e){a(n,function(t){o($(e),t)})})},x=function(t){"use strict";o($(t))};o=function(t,e){"use strict";$("#edit-document-form .ui-state-error").removeClass("ui-state-error"),$("#save-document-button").show(),t.find(".field-view").each(function(t,n){var r,i=$(n).attr("data-field-value"),s=$(n).attr("data-field-field"),o=$(n).attr("data-field-instance");i&&(r=JSON.parse(i)),e||(e=$("body")),u(e.find(".field[data-field-field="+s+"]"),r,o)})},u=function(t,e,n){"use strict";t.is("input.boolean")?t.prop("checked",e):e&&t.is("select.open-boolean")?t.val(""+e):e&&t.is("select.multiselect")?(e=e.map(function(t){return encodeURIComponent(t).replace(/[!'()]/g,window.escape).replace(/\*/g,"%2A")}),t.val(e)):e&&t.is("select.select")?(e=encodeURIComponent(e).replace(/[!'()]/g,window.escape).replace(/\*/g,"%2A"),t.val(e)):e&&(t.is("input.text")||t.is("select.file"))?t.val(decodeURIComponent(e.replace(/\+/g," "))):t.val(e),t.attr("data-field-instance",n)},a=function(t,e,n){"use strict";var r=""+b($(t),"fieldset"),i=l($(t)).fs("fieldset"),s=$("#container-"+i),o=function(t){s.append(t),w(s,e,n)},u=function(t){sessionStorage.setItem(r,t),o(t)};return h(""+r,o,u),!1};var k=function(t){"use strict";var e={fieldsets:[]};
return t.find("fieldset").each(function(t,n){n=$(n);var r,i=l(n),s={id:i.fs("fieldset"),multiple:"true"===i.fs("multiple"),collapse:"true"===i.fs("collapse"),name:i.fs("name"),label:i.fs("label"),order:1*i.fs("order")};r=p(s.id).children(".fields"),s.multiple?(s.multifields=[],r.each(function(t,e){e=$(e),s.multifields[t]=v(e,t)})):$.extend(s,v(r.first())),e.fieldsets[t]=s}),e},_=function(){"use strict";return $("fieldset").each(function(t,e){var n=l($(e));"false"===n.fs("multiple")&&a(e,!1)}),!0},S=function(t){"use strict";t.parent().remove()},E=function(){"use strict";return $(".fieldset-view").each(function(t,e){"true"===l($(e)).fs("multiple")?j(e):x(e)}),f.afterEditRefresh(),!0};n.initFieldset=a,n.fieldsetsToObject=k,n.initFieldsets=_,n.removeFieldset=S,n.fillFieldsets=E},{"../path.js":48,"../store.js":57,"../utils.js":58,"./editui.js":23}],25:[function(t,e,n){var r=t("templates.js"),i=t("../pager.js").pager,s=t("./viewui.js"),o=t("./editui.js"),u=function(){"use strict";return"index"},a=function(){"use strict";var t="documents/"+u(),e=document.getElementById("index-"+u()+"-input").value,n=document.getElementById(u()+"-listing"),r=function(t){var n=JSON.parse(t);return n.rows=n.rows.map(function(t){return t.display_key=t.key.map(function(t){return t[1]}),e&&t.value.length>0&&(t.value=t.value.split(", ")),t}),n};return i({prefix:u(),format:r,url:t,indexId:e,target:n}).get(),!0},c=function(){"use strict";var t,e="indexes?as=options";return $.getJSON(e,function(e){t=r["index-options"](e),$("#index-index-input").html(t)}),!0},l=function(t){"use strict";var e=$(t).attr("href").slice(1);return $("#document-view").html("<em>Loading...</em>"),o.clear(),s.get(e),!0};n.prefix=u,n.get=a,n.iOpts=c,n.load=l},{"../pager.js":46,"./editui.js":23,"./viewui.js":28,"templates.js":"e8H8MT"}],26:[function(t,e,n){var r=t("templates.js");t("../utils.js");var i=t("../sets.js");t("./setsui.js");var s,o,u=t("./documents.js"),a=function(){"use strict";return $("#document-search-index")},c=function(){"use strict";return $("#search-index-label")},l=function(){"use strict";return $("#document-search-term")},d=function(){"use strict";return $("#document-search-field")},f=function(){"use strict";return $("#search-field-label")},p=function(){"use strict";return $("#document-search-exclude")},b=function(){"use strict";return $("#document-search-invert")},h=function(){"use strict";return $("#search-all-fields-switch")},v=function(){"use strict";return $("#search-listing")},m=function(){"use strict";return u.identifier()},g=[a,c,d,f,p,b,h],y=function(){"use strict";var t=$("#index-index-input").val();return 0===t.length?null:t},w=function(t){"use strict";return t?!0:null},j=function(){"use strict";var t=m();localStorage.setItem(t+"_searchIndex",null),localStorage.setItem(t+"_searchIndexLabel",null),localStorage.setItem(t+"_searchFields",null),localStorage.setItem(t+"_searchExclude",null),localStorage.setItem(t+"_searchInvert",null)},x=function(){"use strict";g.forEach(function(t){var e=t();switch(e.attr("type")){case"hidden":e.val("");break;case"checkbox":e.prop("checked",!1)}})},k=function(){"use strict";g.forEach(function(t){var e=t();switch(e.attr("type")){case"hidden":break;case"checkbox":e.parent("div").hide();break;default:e.hide()}})},_=function(){"use strict";var t=m(),e=JSON.parse(sessionStorage.getItem(t+"_labels"));return e},S=function(t,e){"use strict";return r["search-field-item"]({fieldLabel:e,field:t})},E=function(t){"use strict";var e=_(),n=JSON.stringify(t),r=f(),i=m();d().val(n),localStorage.setItem(i+"_searchFields",n);var s=t.map(function(t){return S(t,e[t].join(": "))});return r.html(s.join(" ")),!0},I=function(){"use strict";return j(),k(),x(),!0},T=function(t){"use strict";return s(t),b().parent().show(),!0},C=function(t){"use strict";var e=m();return T(t),b().prop("checked",!0),localStorage.setItem(e+"_searchInvert",!0),!0};s=function(t){"use strict";return I(),E(t),[h(),f(),p().parent()].forEach(function(t){t.show()}),!0};var A=function(t){"use strict";var e=m();return t.length>1?s(t):T(t),p().prop("checked",!0),localStorage.setItem(e+"_searchExclude",!0),!0},O=function(t,e){"use strict";var n=m();return I(),localStorage.setItem(n+"_searchIndex",t),localStorage.setItem(n+"_searchIndexLabel",e),a().val(t),c().html(e),[h(),a(),c(),b().parent()].forEach(function(t){t.show()}),!0},D=function(t,e){"use strict";var n=m();return O(t,e),b().prop("checked",!0),localStorage.setItem(n+"_searchInvert",!0),!0},F=function(){"use strict";var t=l().val(),e="documents/search?q="+window.encodeURIComponent(t),n=d().val(),r=p().is(":checked"),i=b().is(":checked"),s=a().val(),o=_();return s?e=e+"&index="+s:(n&&(e=e+"&field="+n),r&&(e+="&exclude=true")),i&&(e+="&invert=true"),v().hide(),$.get(e,function(e){v().html(e),$(".search-result-field-id").each(function(t,e){var n=o[$(e).attr("data-field-field")].join(": "),r=$(e).children("a").first();r.html(n),r.attr("data-search-label",n)}),i||$(".search-results th").each(function(e,n){var r=$.trim($(n).children("a").html()),i=RegExp("("+t+")","g"),s=r.replace(i,'<span class="highlight">$1</span>');$(n).children("a").html(s)}),v().show()}),!0},q=function(t){"use strict";var e,n,r=m(),i=localStorage.getItem(r+"_searchFields"),s=JSON.parse(i),u=$(t).attr("data-field-field");return null!==s&&(n=s.filter(function(t){return t!==u}),e=JSON.stringify(n),localStorage.setItem(r+"_searchFields",0===n.length?null:e),localStorage.setItem(r+"_searchIndex",null),o()),!0},N=function(t){"use strict";var e,n,r=m(),s=localStorage.getItem(r+"_searchFields"),u=JSON.parse(s),a=$(t).attr("data-field-field");return null===u&&(u=[]),n=i.union(u,a),e=JSON.stringify(n),localStorage.setItem(r+"_searchFields",0===n.length?null:e),localStorage.setItem(r+"_searchIndex",null),o(),!0},B=function(){"use strict";var t=y(),e=m();return t&&(localStorage.setItem(e+"_searchFields",null),localStorage.setItem(e+"_searchIndex",t),localStorage.setItem(e+"_searchIndexLabel",$("option[value="+t+"]").html()),o()),!0},M=function(){"use strict";var t=m();return localStorage.setItem(t+"_searchInvert",w(b().is(":checked"))),localStorage.setItem(t+"_searchExclude",null),o(),!0},V=function(){"use strict";var t=m();return localStorage.setItem(t+"_searchExclude",w(p().is(":checked"))),localStorage.getItem(t+"_searchInvert",null),o(),!0};o=function(){"use strict";var t,e,n=m(),r=localStorage.getItem(n+"_searchExclude"),i=localStorage.getItem(n+"_searchInvert"),o=localStorage.getItem(n+"_searchIndex"),u=localStorage.getItem(n+"_searchFields"),a=[r,i,o,u].map(function(t){return"null"===t||"false"===t||"true"===t?JSON.parse(t):t}),c=a.every(function(t){return null===t});try{c?I():a[0]===!0?(t=JSON.parse(u),A(t)):null===a[1]&&null!==a[3]?(t=JSON.parse(u),t.length>1?s(t):T(t)):null!==a[3]?(t=JSON.parse(u),t.length>1?s(t):C(t)):null===a[1]?(e=localStorage.getItem(n+"_searchIndexLabel"),O(o,e)):a[1]===!0&&(e=localStorage.getItem(n+"_searchIndexLabel"),D(o,e))}catch(l){window.console.log(l),I()}return!0};var L=function(t){"use strict";var e=$(t);return e.is(":checked")?e.next("label").next("table").addClass("selected-for-save"):e.next("label").next("table").removeClass("selected-for-save"),!0};n.allFields=I,n.singleField=T,n.singleFieldInverse=C,n.multipleFields=s,n.excludedFields=A,n.indexOnly=O,n.indexInverse=D,n.getSearch=F,n.removeField=q,n.addField=N,n.addIndex=B,n.toggleInversion=M,n.toggleExclusion=V,n.loadSearchVals=o,n.toggleSelection=L},{"../sets.js":50,"../utils.js":58,"./documents.js":22,"./setsui.js":27,"templates.js":"e8H8MT"}],27:[function(t,e,n){var r,i,s,o,u,a,c,l=t("templates.js"),d=t("../sender.js"),f=t("../flash.js"),p=t("../sets.js"),b=t("../utils.js"),h=t("./documents.js"),v=function(){"use strict";return $("#document-set-a-input")},m=function(){"use strict";return $("#document-set-b-input")},g=function(){"use strict";return $("#document-worksheets-set-input")},y=function(){"use strict";return $("#document-set-operation-input")},w=function(){"use strict";return $("#set-listing")},j=function(){"use strict";return h.identifier()+"_sets"},x=function(t,e){"use strict";return t.some(function(t){return e[0]===t[0]&&e[1]===t[1]})},k=function(t){"use strict";var e=t[0],n=p.unique(t[1],x),r=[e,n];return r},_=function(t,e){"use strict";var n=c(t)[1],r=c(e)[1],i=p.union(n,r,x);return u(i),!0},S=function(t,e){"use strict";var n=c(t)[1],r=c(e)[1],i=p.intersection(n,r,x);return u(i),!0},E=function(t,e){"use strict";var n=c(t)[1],r=c(e)[1],i=p.relativeComplement(n,r,x);return u(i),!0},I=function(t,e){"use strict";var n=c(t)[1],r=c(e)[1],i=p.symmetricDifference(n,r,x);return u(i),!0};a=function(){"use strict";var t=window.sessionStorage.getItem(j()),e=[];return null!==t&&(e=JSON.parse(t)),e};var T=function(t){"use strict";var e=c(t)[1];return u(e),!0},C=function(t){"use strict";return r(t),u([]),d.sender("sets-changed"),!0};r=function(t){"use strict";var e,n=a();return e=n.filter(function(e){return e[0]!==t}),i(e),!0};var A=function(){"use strict";var t=a();return t.map(function(t){return t[0]})};i=function(t){"use strict";var e;return Array.isArray(t)?(e=t.map(function(t){return k(t)}),window.sessionStorage.setItem(j(),JSON.stringify(e))):window.sessionStorage.settem(j(),"[]"),!0};var O=function(t){"use strict";if(Array.isArray(t)&&2===t.length){var e=a(),n=t[0],r=e.filter(function(t){return t[0]!==n});i(r.concat([t]))}return!0},D=function(t){"use strict";var e=[];switch(t){case"search":e=o();break;case"sets":e=s()}return e};s=function(){"use strict";var t,e=$("input.set-element-selection:checked");return t=$.map(e,function(t){var e=$(t).parent("td").next("td").find("a").first(),n=e.first().attr("href").replace(/^#/,""),r=e.html().trim();return[[r,n]]})},o=function(){"use strict";var t,e=$("table.selected-for-save tr");return t=$.map(e,function(t){var e=$(t).find("th a").first().attr("href").replace(/^#/,""),n=$(t).find("td.search-result-context a").first().html().trim();return[[n,e]]})},u=function(t){"use strict";var e=t.length,n=t.map(function(t){return{id:t[1],context:t[0]}}),r=l["set-listing"]({elements:n,total:e});return w().html(r),!0};var c=function(t){"use strict";var e,n=a();return e=n.filter(function(e){return e[0]===t})[0]},F=function(){"use strict";switch(y().val()){case"view-a":T(v().val());break;case"view-b":T(m().val());break;case"remove-a":C(v().val());break;case"remove-b":C(m().val());break;case"union":_(v().val(),m().val());break;case"intersection":S(v().val(),m().val());break;case"symmetric-difference":I(v().val(),m().val());break;case"relative-complement-b-in-a":E(v().val(),m().val());break;case"relative-complement-a-in-b":E(m().val(),v().val());break;default:}return!0},q=function(){"use strict";var t=A(),e=l["set-options"]({names:t});return v().html(e),m().html(e),g().html(e),!0},N=function(){"use strict";var t,e,n=$("#new-set-dialog"),r=$("#new-set-input").val(),i=$("#new-set-target-input").val();return b.isBlank(r)?f.error("Input invalid:","You must supply a valid name."):(n.hide(),t=D(i),e=[r,t],O(e),$("#new-set-input").val(""),d.sender("sets-changed"),f.highlight("Success:",'Set "'+r+'" saved.')),!0},B=function(t){"use strict";return $(t).is(":checked")?$("input.set-element-selection").prop("checked",!0):$("input.set-element-selection").prop("checked",!1),!0};n.getSet=c,n.performOp=F,n.updateSelection=q,n.saveSelected=N,n.toggleSelectAll=B},{"../flash.js":31,"../sender.js":55,"../sets.js":50,"../utils.js":58,"./documents.js":22,"templates.js":"e8H8MT"}],28:[function(t,e,n){var r=t("templates.js"),i=t("../store.js").store,s=t("./indexui.js"),o=t("../flash.js"),u=t("./editui.js"),a=t("./fieldsets.js"),c=function(){"use strict";return $("#document-view")},l=function(){"use strict";return $("#document-view-tree")},d=function(){"use strict";return $("#document-view-info")},f=function(t){"use strict";return Object.keys(t).reduce(function(e,n){return void 0===t[n].newValue&&(void 0===e[t[n].fieldset]&&(e[t[n].fieldset]={}),e[t[n].fieldset][n]=t[n]),e},{})},p=function(t){"use strict";var e={};return t.changes&&(e=f(t.changes)),t.fieldsets.forEach(function(n){var r=n.id;void 0!==e[r]&&(n.removal=!0,n.altered=!0);var i=function(e){var r,i={};return t.changes&&(i=t.changes),r=i[e.instance],e.json_value=JSON.stringify(e.value),void 0!==r&&(e.changed=!0,n.altered=!0,void 0===r.originalValue?(n.addition=!0,e.newfield=!0):e.originalValue=JSON.parse(r.originalValue)),"textarea"===e.subcategory?e.is_textarea=!0:e.value&&e.subcategory.match("multi")&&(e.value=e.value.join(", ")),!0};return n.multiple?n.multifields.forEach(function(t){t.fields.forEach(function(t){return i(t),!0})}):n.fields.forEach(function(t){return i(t),!0}),!0}),!0},b=function(){"use strict";return $(".timestamp").each(function(t,e){var n=new Date($(e).text()).toLocaleString();"Invalid Date"!==n&&$(e).text(n)}),!0},h=function(t,e,n){"use strict";var s,o="documents/"+t,u=c();return e?(o=o+"/"+e,u=l(),s=function(t){return r["document-view-tree"](t)}):s=function(t){return r["document-view"](t)},$.getJSON(o,function(r){var o;if(p(r,e),o=s(r),u.html(o),window.location.hash=t,b(),c().fadeTo("slow",1),n&&n(),e)$("#document-view-tree").addClass("oldrev");else{var a=$("#document-restore-button"),l=$("#document-edit-button"),d=$("#document-delete-button");"true"===i(a).d("deleted")&&(l.hide(),d.hide(),a.show())}}),!0},v=function(t,e){"use strict";var n="./documents/"+t+"?rev="+e;$("#document-restore-button");var r,i,u=$("#first-index-element").attr("data-first-key"),a=$("#first-index-element").attr("data-first-id");return $.ajax({type:"DELETE",url:n,dataType:"json",contentType:"application/json",complete:function(e){200===e.status?(i="Success",r="Your document was restored.",h(t,null,function(){c().fadeTo("slow",1),s.get(u,a)}),o.highlight(i,r)):409===e.status?(r=JSON.parse(e.responseText),i=e.statusText,o.error(i,r.message)):404===e.status&&(r="Document was erased and cannot be restored.",i=e.statusText,o.error(i,r))}}),!0},m=function(t,e){"use strict";var n,r,u="./documents/"+t+"?rev="+e,a=$("#document-restore-button"),l=$("#first-index-element").attr("data-first-key"),d=$("#first-index-element").attr("data-first-id");return $.ajax({type:"DELETE",url:u,dataType:"json",contentType:"application/json",complete:function(t){if(200===t.status){r="Success",n="Your document was deleted.";var e=JSON.parse(t.responseText);i(a).put("document-rev",e.rev),$("#document-delete-button").hide(),$("#document-edit-button").hide(),a.show(),c().fadeTo("slow",.5),s.get(l,d),o.highlight(r,n)}else 409===t.status?(n=JSON.parse(t.responseText),r=t.statusText,o.error(r,n.message)):404===t.status&&(n="Document appears to have been deleted already.",r=t.statusText,o.error(r,n))}}),!0},g=function(t){"use strict";if(window.confirm("Are you sure?")){var e=i(d()),n=e.d("document"),r=e.d("rev");t(n,r)}return!0},y=function(){"use strict";return u.resetFields(),$("#document-view-tree").hasClass("oldrev")?$("#save-document-button").addClass("oldrev"):$("#save-document-button").removeClass("oldrev"),a.fillFieldsets(),!0},w=function(){"use strict";var t=i(d()),e=t.d("document"),n=t.d("rev");return g(function(){m(e,n)})},j=function(){"use strict";var t=i(d()),e=t.d("document"),n=t.d("rev");return g(function(){v(e,n)})},x=function(t){"use strict";return $(t).parent("li").toggleClass("collapsed"),!0},k=function(t){"use strict";var e=i($(t)),n=e.d("document"),r=e.d("oldrev");return $(".revision-link").removeClass("selected-revision"),$(t).addClass("selected-revision"),h(n,r),!0};n.formatTimestamps=b,n.get=h,n.restore=v,n.del=m,n.confirmIt=g,n.edit=y,n.confirmDelete=w,n.confirmRestore=j,n.collapseToggle=x,n.fetchRevision=k},{"../flash.js":31,"../store.js":57,"./editui.js":23,"./fieldsets.js":24,"./indexui.js":25,"templates.js":"e8H8MT"}],29:[function(t,e,n){var r=t("hogan.js"),i=t("templates.js"),s=t("./setsui.js"),o=t("./documents.js"),u=t("../form.js"),a=t("../flash.js"),c=function(){"use strict";return $("#document-worksheets-set-input")},l=function(){"use strict";return $("#worksheet-area")},d=function(){"use strict";return o.identifier()+"_worksheet-template"},f=function(t){"use strict";return t?($("#worksheet-table tbody tr").addClass("selected-row"),$("#worksheet-table tbody tr input").prop("checked",!0)):($("#worksheet-table tbody tr").removeClass("selected-row"),$("#worksheet-table tbody tr input:checked").prop("checked",!1)),!0},p=function(t,e){"use strict";return e?($("#"+t).addClass("selected-row"),$("#select-all-worksheet-rows").prop("checked",!1)):($("#"+t).removeClass("selected-row"),$("#select-all-worksheet-rows").prop("checked",!1)),!0},b=function(t,e){"use strict";return e?$(".field-column."+t).addClass("selected-column"):$(".field-column."+t).removeClass("selected-column"),!0},h=function(){"use strict";return $("#worksheet-table .handle-column.fieldset").show(),!0},v=function(){"use strict";return $("#worksheet-table .handle-column.fieldset").hide(),!0},m=function(t){"use strict";return $("#worksheet-table .handle-column.field."+t).show(),!0},g=function(t){"use strict";return $("#worksheet-table .handle-column.field."+t).hide(),!0},y=function(t){"use strict";return $(".field-column."+t).show(),!0},w=function(t){"use strict";return $(".field-column."+t).hide(),!0},j=function(){"use strict";var t=o.info(),e="{{=<% %>=}}\n"+i.worksheet(t);return globals[d()]=r.compile(e),!0},x=function(){"use strict";var t=c().val(),e="worksheets",n=function(t,e){var n=JSON.parse(e.responseText),r=globals[d()].render(n);l().html(r)};if(!t.isBlank()){var r=s.getSet(t)[1];if(250>=r.length){var i=r.map(function(t){return t[1]});u.send(e,i,"POST",n)}else a.error("Could not load worksheet","the current set size is limited to 250 items.")}return!0};n.selectAllRows=f,n.rowSelection=p,n.columnSelection=b,n.showHandles=h,n.hideHandles=v,n.showFieldset=m,n.hideFieldset=g,n.showField=y,n.hideField=w,n.buildTemplate=j,n.fillWorksheet=x},{"../flash.js":31,"../form.js":32,"./documents.js":22,"./setsui.js":27,"hogan.js":"nLm5Ax","templates.js":"e8H8MT"}],30:[function(t,e,n){var r,i=t("../form.js"),s=t("../flash.js"),o=function(t){"use strict";void 0===t&&(t=""),$.get("file_manager/list_dirs/"+t,function(t){$("#file-paths").html(t)})},u=function(t){"use strict";void 0===t&&(t=""),$.get("file_manager/list_files/"+t,function(t){$("#file-listing").html(t)})},a=function(t,e){"use strict";var n=$("#file-path-input");t.path?n.val(t.path.join("/")):n.val("");var o=$("#edit-path-dialog").dialog({autoOpen:!1,modal:!0,buttons:{Move:function(){var u="file_manager/"+t._id+"?rev="+t._rev,a=function(){r(e),s.highlight("Success","File Moved")};t.path=n.val().replace(/^\s*|\s*$/g,"").replace(/\/+/g,"/").replace(/^\/|\/$/g,"").split("/"),i.send(u,t,"PUT",a,o),$(this).dialog("close")},Cancel:function(){$(this).dialog("close")}}});return o},c=function(){"use strict";r(),$("#file-upload-target").load(function(){var t=$("#file-upload-target").contents().find("body pre").html(),e=function(){return t&&t.length>0?JSON.parse(t):{message:!1}};e()&&e().message&&"success"!==e().status?(s.error("Error",e().message),r()):e().message&&(s.highlight("Success",e().message),r())})},l=function(t){"use strict";var e=$(t).attr("data-path");return window.sessionStorage.fmPath=e,r(e),!0},d=function(){"use strict";return window.sessionStorage.fmPath="",r(),!0},f=function(){"use strict";var t=window.sessionStorage.fmPath,e=t.split("/");return e.pop(),e=e.join("/"),window.sessionStorage.fmPath=e,r(e),!0},p=function(t){"use strict";var e=window.sessionStorage.fmPath,n=t.attr("data-file-id"),r="file_manager/"+n;return $.getJSON(r,function(t){a(t,e).dialog("open")}),!0},b=function(t){"use strict";var e=window.sessionStorage.fmPath,n=t.attr("data-file-id"),o=t.attr("data-file-rev"),u="file_manager/"+n+"?rev="+o,a=function(){r(e),s.highlight("Success","File Deleted")};return i.send(u,null,"DELETE",a,t),!0};r=function(t){"use strict";o(t),u(t)},n.init=c,n.goDir=l,n.rootDir=d,n.upDir=f,n.editFile=p,n.deleteFile=b,n.refreshListings=r},{"../flash.js":31,"../form.js":32}],31:[function(t,e,n){var r=function(t,e,n){"use strict";var r=function(){t.fadeOut()};t.find(".notification-summary").text(e+": "),t.find(".notification-message").text(n);var i=window.setTimeout(r,7e3);t.fadeIn(),t.find(".close").click(function(){window.clearTimeout(i),t.hide()})},i=function(t,e){"use strict";return r($("#notifications-main .ui-state-error"),t,e),!0},s=function(t,e){"use strict";return r($("#notifications-main .ui-state-highlight"),t,e),!0};n.error=i,n.highlight=s},{}],32:[function(t,e,n){var r,i=t("./flash.js"),s=function(t){"use strict";var e,n=$(t);return n.attr("data-target")&&(e=$("#"+n.attr("data-target")),e.toggle()),!0},o=function(t){"use strict";var e,n,i=$(t);return i.attr("data-target")&&(n="#"+i.attr("data-target"),e=$(n),e.hide(),r(void 0,e.find("form"))),!0};r=function(t,e){"use strict";return void 0===t&&(t=$(e).find("input, select, textarea")),t.each(function(t,e){var n=$(e);n.attr("data-retain")||(n.is(":checked")&&n.attr("checked",!1),n.val(""))}),t};var u=function(t,e,n,r,s){"use strict";var o;return e&&(o=JSON.stringify(e)),$.ajax({type:n,url:t,dataType:"json",context:s,contentType:"application/json",processData:!1,data:o,complete:function(t){if(t.status>=200&&300>t.status)r(this,t);else if(500===t.status)i.error("Unknown Server Error","Please report that you received this message");else if(t.status>=400){var e=JSON.parse(t.responseText),n=t.statusText;i.error(n,e.fieldname+" "+e.message)}}}),!0},a=function(t,e){"use strict";return e.append('<span class="validation-error-message">'+t+"</span>").addClass("ui-state-highlight"),setTimeout(function(){e.removeClass("ui-state-highlight",1500)},500),!0},c=function(t,e,n,r,i){"use strict";return t.val().length>r||n>t.val().length?(t.addClass("ui-state-error"),a("Length of "+e+" must be between "+n+" and "+r+".",i),!1):!0},l=function(t,e,n,r){"use strict";return e.test(t.val())?!0:(t.addClass("ui-state-error"),a(n,r),!1)},d=function(){"use strict";return $(".date").datepicker({dateFormat:"yy-mm-dd"}),!0},f=function(t,e,n){"use strict";return $.get(t,function(t){e.html(t),n&&n()}),!1};n.toggle=s,n.cancelDialog=o,n.clear=r,n.send=u,n.updateTips=a,n.checkLength=c,n.checkRegexp=l,n.initDateFields=d,n.fillOptionsFromUrl=f},{"./flash.js":31}],33:[function(t,e,n){t("./recurse.js");var r=t("templates.js"),i=function(t){"use strict";var e="cannot build form from: ";if(null===t)throw e+"null";if("string"==typeof t)throw e+"string";if("number"==typeof t)throw e+"number";if(t.constructor===Array)throw e+"array";if(0===Object.keys(t).length)throw e+"empty object";return t},s=function(t){"use strict";var e;try{e=JSON.parse(t)}catch(n){switch(n.name){case"SyntaxError":throw n.message="invalid JSON: "+JSON.stringify(t),n;default:throw n}}return e},o=function(t){"use strict";var e=Object.keys(t).reduce(function(e,n){var r=t[n],i={key:n,val:r};return"string"==typeof r&&32>=r.length?i.string=!0:"number"==typeof r?i.number=!0:"string"==typeof r&&r.length>32&&(i.text=!0),e.concat(i)},[]);return r["simple-to-form"]({fields:e})},u=function(t){"use strict";var e=s(t);return e=i(e),o(e)};n.toForm=u},{"./recurse.js":53,"templates.js":"e8H8MT"}],34:[function(){},{}],35:[function(t,e,n){t("../jquery-ui-input-state.js");var r=t("./ihelpers.js"),i=t("../form.js"),s=t("./ievents.js"),o=function(t){"use strict";var e=$("#builder-or-input"),n=$("#builder-paren-input"),o=$("#builder-negate-input"),u=$("#builder-operator-input").inputDisable(),a=$("#builder-argument-input").inputDisable(),c=$("#builder-fieldset-input").inputDisable(),l=$("#builder-field-input").inputDisable(),d=[u,c,l],f="doctypes/"+t+"/fieldsets",p="indexes/condition";$(".ui-helper-reset div").show();var b=function(t){var e=$("#index-conditions-listing tbody");return e.append(t),e.sortable(),!1};r.fOpts(f,c,function(){c.inputEnable()}),e.change(function(){e.is(":checked")?($("#builder-conditions").hide(),$("#builder-parens").hide()):($("#builder-conditions").show(),$("#builder-parens").show())}),n.change(function(){n.val()?($("#builder-or").hide(),$("#builder-conditions").hide()):($("#builder-or").show(),$("#builder-conditions").show())});var h=function(){s.setIndexFieldsetEvents(t,c,l,function(){return u.inputDisable(),l.inputDisable(),a.inputDisable(),function(){l.inputEnable()}})},v=function(){s.setIndexFieldEvents(t,c,l,function(){return u.inputDisable(),a.inputDisable(),function(){u.inputEnable()}})},m=function(){s.setIndexOperatorEvents(a,u,l,function(){return a.inputDisable(),function(){a.inputEnable()}})},g=$("#index-builder-dialog").dialog({autoOpen:!1,modal:!0,buttons:{Create:function(){$(".input").removeClass("ui-state-error");var t=!0;e.is(":checked")||n.val()||d.forEach(function(e){e.val().isBlank()?(e.addClass("ui-state-error"),t=!1):e.removeClass("ui-state-error")}),t&&(e.is(":checked")?$.get(p,{is_or:!0},function(t){b(t)}):n.val()?$.get(p,{is_or:!1,parens:n.val(),negate:!1},function(t){b(t)}):$.get(p,{is_or:!1,parens:!1,negate:o.is(":checked"),fieldset:c.val(),field:l.val(),operator:u.val(),argument:a.val()},function(t){b(t)}),$(this).dialog("close"))},Cancel:function(){$(this).dialog("close")}},close:function(){$("#builder-conditions").show(),c.unbind("change"),l.unbind("change"),u.unbind("change"),i.clear($(".input")).removeClass("ui-state-error")}});return h(),v(),m(),g};n.initIndexBuilderDialog=o},{"../form.js":32,"../jquery-ui-input-state.js":43,"./ievents.js":37,"./ihelpers.js":38}],36:[function(t,e,n){var r=t("./new-dialog.js").initIndexNewDialog,i=t("./builder-dialog.js").initIndexBuilderDialog,s=t("./replace-dialog.js").initReplaceDialog,o=t("./ilistingui.js"),u=t("./ipreviewui.js"),a=t("./ihelpers.js"),c=t("../form.js"),l=t("../flash.js"),d=function(){"use strict";return $("#index-conditions-listing tbody")},f=function(){"use strict";return $("#index-editing-data")},p=function(t,e,n){"use strict";switch(e){case"integer":case"rational":t=1*t}switch(n){case"hasExactly":case"hasGreater":case"hasLess":t=Math.floor(1*t)}return t},b=function(t,e){"use strict";var n=e.map(function(e,n){n=$(n);var r,i="true"===n.find("td.or-condition").attr("data-value"),s=n.find("td.paren-condition").attr("data-value");if(i)r={is_or:!0,parens:!1};else if(s)r={is_or:!1,parens:s};else{var o=n.find("td.field-condition").attr("data-value"),u=n.find("td.fieldset-condition").attr("data-value"),c=n.find("td.argument-condition").attr("data-value"),l=a.getFieldDoc(o,u,t),d="true"===n.find("td.negate-condition").attr("data-value"),f=n.find("td.operator-condition").attr("data-value");c=p(c,l.subcategory,f),r={is_or:!1,parens:!1,negate:d,fieldset:u,field:o,operator:f,argument:c}}return r}).toArray();return n},h=function(t,e){"use strict";var n=t.attr("data-index-id"),r=t.attr("data-index-rev"),i="indexes/"+n+"?rev="+r,s=t.attr("data-index-doctype"),o={_id:n,category:"index",doctype:s,show_deleted:"true"===t.attr("data-index-show_deleted"),fields:JSON.parse(t.attr("data-index-fields")),fields_label:JSON.parse(t.attr("data-index-fields_label")),name:t.attr("data-index-name"),conditions:b(s,$("#index-conditions-listing tbody tr"))};return t.attr("data-index-replace_function")&&(o.replace_function=t.attr("data-index-replace_function")),c.send(i,o,"PUT",e,this),!1},v=function(t,e,n,r){"use strict";var i,s,o="indexes/"+t+"?rev="+e;return $.ajax({type:"DELETE",url:o,dataType:"json",contentType:"application/json",complete:function(t){204===t.status?(i="Success",s=n,r(),l.highlight(i,s)):409===t.status?(s=JSON.parse(t.responseText),i=t.statusText,l.error(i,s.message)):404===t.status&&(s="Index appears to have been deleted already.",i=t.statusText,l.error(i,s))}}),!1},m=function(t){"use strict";var e=$(t).attr("data-index-id"),n="indexes/"+e,r=$("#index-conditions");return $.get(n,function(t){r.html(t),d().sortable(),u.get()}),!1},g=function(){"use strict";var t=f();if(0!==t.length){var e=function(){m(t),l.highlight("Success","Your index has been saved.")};h(t,e)}else l.highlight("Info","No index has been chosen to save.")},y=function(){"use strict";var t=f();return 0!==t.length?s.dialog("open"):l.highlight("Info","You must choose an index first."),!0},w=function(){"use strict";var t=f();return 0!==t.length?i(t.attr("data-index-doctype")).dialog("open"):l.highlight("Info","You must choose an index first."),!0},j=function(t){"use strict";return $(t).closest("tr").remove(),!0},x=function(){"use strict";return r().dialog("open"),!0},k=function(){"use strict";var t=f();if(0!==t.length){var e=t.attr("data-index-id"),n=t.attr("data-index-rev"),r="Your index has been deleted.",i=function(){$("#index-conditions").empty(),o.init()};window.confirm("Are you sure?")&&v(e,n,r,i)}else l.highlight("Info","No index has been chosen to delete.");return!0};n.init=m,n.save=g,n.replace=y,n.addCond=w,n.remCond=j,n.newCond=x,n.del=k},{"../flash.js":31,"../form.js":32,"./builder-dialog.js":35,"./ihelpers.js":38,"./ilistingui.js":39,"./ipreviewui.js":40,"./new-dialog.js":41,"./replace-dialog.js":42}],37:[function(t,e,n){var r=t("./ihelpers.js"),i=function(t,e,n){"use strict";return t.change(function(){var i,s="doctypes/"+t.val()+"/fieldsets";n&&(i=n()),r.fOpts(s,e,i)}),!1},s=function(t,e,n,i){"use strict";return e.change(function(){var s;if("string"!=typeof t&&(t=t.val()),e.val()){var o="doctypes/"+t+"/fieldsets/"+e.val()+"/fields?as=options";i&&(s=i()),r.fOpts(o,n,s)}}),!0},o=function(t,e,n,i){"use strict";return n.change(function(){var s,o=n.val(),u=e.val();i&&(s=i()),o.isBlank()||r.getFieldDoc(o,u,t,function(t){r.alterOpts(t,o,s)})}),!0},u=function(t,e,n,i){"use strict";return e.change(function(){var s;i&&(s=i()),r.alterArg(t,e,n,s)}),!0};n.setIndexOperatorEvents=u,n.setIndexFieldEvents=o,n.setIndexFieldsetEvents=s,n.setIndexDoctypeEvents=i},{"./ihelpers.js":38}],38:[function(t,e,n){var r=t("../sess.js"),i=function(t,e){"use strict";return t.children().show(),e.forEach(function(e){t.children("option:contains("+e+")").hide()}),!1},s=function(t){"use strict";var e=$("#builder-operator-input");switch(t.subcategory){case"select":case"docselect":case"text":case"textarea":i(e,["member","true"]);break;case"integer":case"rational":case"date":i(e,["member","true","match"]);break;case"boolean":case"openboolean":i(e,["equal","greater","less","member","match"]);break;case"multiselect":case"docmultiselect":i(e,["equal","greater","less","true","match"])}return!1},o=function(t,e,n,i){"use strict";var s=function(){return r.get(n.val())};i();try{t.removeAttr("disabled").datepicker("destroy"),t.removeAttr("disabled").autocomplete("destroy")}catch(o){window.console.log(o.message)}var u=function(t,e){return"date"===e.subcategory?(t.removeAttr("disabled"),t.datepicker({dateFormat:"yy-mm-dd"})):(t.removeAttr("disabled"),t.autocomplete({source:e.allowed})),!0},a=s();if(a)switch(e.val()){case"true":case"isDefined":case"blank":t.attr("disabled","disabled").val("");break;case"equal":case"member":case"greater":case"less":case"hasExactly":case"hasGreater":case"hasLess":u(t,a)}return!0},u=function(t,e,n){"use strict";return s(t),n(),!0},a=function(t,e,n){"use strict";return $.get(t,function(t){e.html(t),n&&n()}),!0},c=function(t,e,n,i){"use strict";var s=r.get(t),o="doctypes/"+n+"/fieldsets/"+e+"/fields/"+t+"?format=json";return s?(i&&i(s),s):($.ajax({url:o,async:!1,dataType:"json",success:function(e){r.put(e),i&&i(r.get(t))}}),r.get(t))},l=function(){"use strict";var t={};t.setIndexDoctypeEvents=function(t,e,n){return t.change(function(){var r,i="doctypes/"+t.val()+"/fieldsets";n&&(r=n()),a(i,e,r)}),!1},t.setIndexFieldsetEvents=function(e,n,r,i){return n.change(function(){var t;if("string"!=typeof e&&(e=e.val()),n.val()){var s="doctypes/"+e+"/fieldsets/"+n.val()+"/fields?as=options";i&&(t=i()),a(s,r,t)}}),t},t.setIndexFieldEvents=function(e,n,r,i){return r.change(function(){var t,s=r.val(),o=n.val();i&&(t=i()),s.isBlank()||c(s,o,e,function(e){u(e,s,t)})}),t},t.setIndexOperatorEvents=function(e,n,r,i){return n.change(function(){var t;i&&(t=i()),o(e,n,r,t)}),t}};n.alterArg=o,n.alterOpts=u,n.fOpts=a,n.getFieldDoc=c,n.evs=l},{"../sess.js":56}],39:[function(t,e,n){var r=t("templates.js"),i=function(){"use strict";
var t,e="indexes",n=$("#index-index-listing");return $.getJSON(e,function(e){t=r["index-listing"](e),n.html(t)}),!0};n.init=i},{"templates.js":"e8H8MT"}],40:[function(t,e,n){var r=t("../pager.js").pager,i=function(){"use strict";return"preview"},s=function(){"use strict";var t=document.getElementById("index-editing-data").getAttribute("data-index-id"),e="indexes/"+t+"/preview",n=document.getElementById(i()+"-list-view"),s=function(t){var e=JSON.parse(t);return e.rows=e.rows.map(function(t){return t.display_key=t.key.map(function(t){return t[1]}),t}),e};return t&&r({prefix:i(),format:s,url:e,target:n}).get(),!0};n.prefix=i,n.get=s},{"../pager.js":46}],41:[function(t,e,n){t("../jquery-ui-input-state.js"),t("./ihelpers.js");var r=t("./ilistingui.js"),i=t("../form.js"),s=t("./ievents.js"),o=function(){"use strict";var t=$("#index-doctype-input"),e=$("#index-fieldset-input").inputDisable(),n=$("#index-field-input").inputDisable(),o=$("#index-name-input"),u=$("#index-show_deleted-input"),a=function(){s.setIndexDoctypeEvents(t,e,function(){return e.inputDisable(),n.inputDisable(),function(){e.inputEnable()}})},c=function(){s.setIndexFieldsetEvents(t,e,n,function(){return n.inputDisable(),function(){n.inputEnable()}})},l=function(t){return $('#index-new-dialog option[value="'+t+'"]').text()},d=function(){return[l(e.val()),l(n.val())].join(":")},f=$("#index-new-dialog").dialog({autoOpen:!1,modal:!0,buttons:{Create:function(){$(".input").removeClass("ui-state-error");var e=!0;if(e){var s={category:"index",name:o.val(),show_deleted:u.is(":checked"),conditions:[],doctype:t.val(),fields_label:[d()],fields:[n.val()]},a=function(t){r.init(),$(t).dialog("close")};i.send("indexes",s,"POST",a,this)}},Cancel:function(){$(this).dialog("close")}},close:function(){e.unbind("change"),t.unbind("change"),i.clear($(".input")).removeClass("ui-state-error")}});return a(),c(),f};n.initIndexNewDialog=o},{"../form.js":32,"../jquery-ui-input-state.js":43,"./ievents.js":37,"./ihelpers.js":38,"./ilistingui.js":39}],42:[function(t,e,n){t("./ihelpers.js");var r=t("../form.js"),i=function(){"use strict";var t=$("#index-replace_function-input"),e=$("#index-editing-data"),n=$("#index-remove_function-input");e.attr("data-index-replace_function")?t.val(e.attr("data-index-replace_function")):r.clear(t).removeClass("ui-state-error");var i=$("#index-replace-dialog").dialog({autoOpen:!1,modal:!0,buttons:{Save:function(){$(".input").removeClass("ui-state-error");var r=!0;n.is(":checked")?(e.removeAttr("data-index-replace_function"),$("#replace-function-message").empty()):(t.val().isBlank()?t.addClass("ui-state-error"):t.removeClass("ui-state-error"),r&&(e.attr("data-index-replace_function",t.val()),$("#replace-function-message").text("This index has a replacement function."))),$(this).dialog("close")},Cancel:function(){$(this).dialog("close")}},close:function(){r.clear(t).removeClass("ui-state-error")}});return i};n.initReplaceDialog=i},{"../form.js":32,"./ihelpers.js":38}],43:[function(){(function(t){"use strict";t.fn.inputDisable=function(){return this.val(""),this.attr("disabled","disabled"),this.addClass("ui-state-disabled"),this},t.fn.inputEnable=function(){return this.removeAttr("disabled"),this.removeClass("ui-state-disabled"),this}})(jQuery)},{}],44:[function(){(function(t){"use strict";function e(e){if("string"==typeof e.data){var n=e.handler,r=e.data.toLowerCase().split(" ");e.handler=function(e){var i="keypress"!==e.type&&t.hotkeys.specialKeys[e.which],s=String.fromCharCode(e.which).toLowerCase(),o="",u={};e.altKey&&"alt"!==i&&(o+="alt+"),e.ctrlKey&&"ctrl"!==i&&(o+="ctrl+"),e.metaKey&&!e.ctrlKey&&"meta"!==i&&(o+="meta+"),e.shiftKey&&"shift"!==i&&(o+="shift+"),i?u[o+i]=!0:(u[o+s]=!0,u[o+t.hotkeys.shiftNums[s]]=!0,"shift+"===o&&(u[t.hotkeys.shiftNums[s]]=!0));for(var a=0,c=r.length;c>a;a++)if(u[r[a]])return n.apply(this,arguments)}}}t.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}},t.each(["keydown","keyup","keypress"],function(){t.event.special[this]={add:e}})})(jQuery)},{}],45:[function(t,e,n){t("./jquery.hotkeys.js");var r=t("./sender.js"),i=t("./index_tool/ipreviewui.js"),s=t("./documents/indexui.js"),o=t("./documents/changeui.js"),u=t("./documents/editui.js"),a=t("./documents/viewui.js"),c=t("./documents/searchui.js"),l=t("./config/charsequi.js"),d=t("./config/doctypeui.js"),f=function(){"use strict";return[i,s,o,d,l].forEach(function(t){var e=function(e){var n;window.clearTimeout(n),n=setTimeout(function(){8!==e.which&&46!==e.which&&t.get()},500)};document.addEventListener("keyup",function(n){n.target.id===t.prefix()+"-filter"?e(n):n.target.id===t.prefix()+"-limit"&&e(n)})}),$(document).on("keydown","#document-worksheets-form",function(t){return 13===t.which?(r.sender("worksheet-form-submit"),!1):!0}),$(document).on("keydown","#document-sets-form",function(t){return 13===t.which?(r.sender("sets-form-submit"),!1):!0}),$("#new-set-form").on("keydown",function(t){return 13===t.which?(r.sender("new-set-form-submit"),!1):!0}),$(document).bind("keydown","Alt+n",function(){var t=function(){return $("#edit-tabs")},e=t().find("li").length,n=t().tabs("option","active");return e-1>n?(t().tabs("option","active",n+1),r.sender("lost-focus")):(t().tabs("option","active",0),r.sender("lost-focus")),!1}),$(document).bind("keydown","Alt+c",function(){var t=$(document.activeElement).attr("id");return r.sender("initiated-command",t),!0}),$(document).bind("keydown","Alt+p",function(){var t=function(){return $("#edit-tabs")},e=t().find("li").length,n=t().tabs("option","active");return 0!==n?(t().tabs("option","active",n-1),r.sender("lost-focus")):(t().tabs("option","active",e-1),r.sender("lost-focus")),!1}),$(document).on("keydown","#edit-command-input",function(t){if(13===t.which){var e=$("#edit-command-input").val();r.sender("submitted-command",e)}return!0}),$(document).on("keydown","#edit-document-form input",function(t){return 13===t.which&&("none"===$("#save-document-button").css("display")?u.create():u.save()),!0}),$(document).on("keydown","#edit-document-form textarea","Alt+x",function(t){return u.toggleTextarea($(t.target)),!1}),$(document).on("keypress","#view-jump-id",function(t){if(13===t.which){var e=$("#view-jump-id").val();return a.get(e),!1}return!0}),$(document).on("keydown","#document-search-term",function(t){return 13===t.which?(c.getSearch(),!1):!0}),!0};n.keystrokes=f},{"./config/charsequi.js":7,"./config/doctypeui.js":12,"./documents/changeui.js":20,"./documents/editui.js":23,"./documents/indexui.js":25,"./documents/searchui.js":26,"./documents/viewui.js":28,"./index_tool/ipreviewui.js":40,"./jquery.hotkeys.js":44,"./sender.js":55}],46:[function(t,e,n){var r=t("templates.js"),i=t("./form.js"),s=function(t){"use strict";var e={};void 0===t.prefix&&(t.prefix="index");var n=t.format,s=t.prefix,o=function(t){return window.btoa(window.unescape(window.encodeURIComponent(JSON.stringify(t))))},u=function(){return document.getElementById(s+"-limit")};return e.get=function(n,r,a,c){var l=t.url+"?",d=t.indexId,f=1*u().value,p=t.target,b=document.getElementById(s+"-filter").value,h={sk:n,sid:r,pks:a,pids:c};return h.pks||(h.sk=o(b),h.pks=[],h.pids=[]),h.sk&&(l=l+"startkey="+window.escape(window.atob(h.sk)),h.sid&&(l=l+"&startkey_docid="+h.sid)),f?l=l+"&limit="+(f+1):(u().value=25,l+="&limit=26"),d&&(l=l+"&index="+d),i.send(l,!1,"GET",function(t,n){e.fill(n,h,p)},this),e},e.fill=function(t,i,a){var c,l,d,f=1*u().value,p=function(){return document.getElementById("previous-"+s+"-page")},b=function(){return document.getElementById("next-"+s+"-page")},h=function(){e.get(i.pks.pop(),i.pids.pop(),i.pks,i.pids)},v=function(){var t=document.getElementById("first-"+s+"-element"),n=b().getAttribute("data-startkey"),r=b().getAttribute("data-startid"),o=t.getAttribute("data-first-key"),u=t.getAttribute("data-first-id");i.pks.push(o),i.pids.push(u),e.get(n,r,i.pks,i.pids)};return c=void 0===n?JSON.parse(t.responseText):n(t.responseText),d=c.rows.map(function(t){return t.encoded_key=o(t.key),t}),l=d.slice(-1),d[0]&&(d[0].firstrow=!0),d.length>f?c.rows=d.slice(0,-1):(c.rows=d,c.lastpage=!0),c.lastrow=l,c.prefix=s,a.innerHTML=r["paged-listing"](c,{"listed-element":r.templates[s+"-element"]}),b().onclick=v,p().onclick=h,0===i.pks.length&&p().classList.add("hidden"),b().getAttribute("data-last-page")&&b().classList.add("hidden"),e},e};n.pager=s},{"./form.js":32,"templates.js":"e8H8MT"}],47:[function(t,e,n){var r=function(t){"use strict";var e;return e=$(t).attr("data-panel")?$("#"+$(t).attr("data-panel")):$(t).closest(".panel"),"none"===e.css("display")?e.css("display","table-cell"):e.css("display","none"),t};n.panelToggler=r},{}],48:[function(t,e,n){var r=t("./store.js").store,i=t("./form.js"),s=function(t,e,n){"use strict";var s,o={};s=e?e+"-":"",o.string=n?n+"/":"",o.category=e,o.origin=t,o.type=s+"path",o.valid_components=["doctype","fieldset","field"];var u=r(o.origin);return o.valid_components.forEach(function(t){o[t]=function(){var e=u.get(s+t);return e}()}),o.rev=u.get(s+"rev"),o.doctype=u.get(s+"doctype"),o.send=function(t,e,n,r){return i.send(""+o,t,e,n,r),o},o.put=function(t,e,n){return o.send(t,"PUT",e,n),o},o.post=function(t,e,n){return o.send(t,"POST",e,n),o},o.del=function(t,e){return o.send({},"DELETE",t,e),o},o.toString=function(){var t=o.string.concat(o.valid_components.map(function(t){var e=t+"s",n=o[t],r=null;return n?r=e+"/"+n:t===o.category&&(r=e),r}).filter(function(t){return"string"==typeof t&&!t.isBlank()}).join("/"));return o.rev&&(t=t.concat("?rev="+o.rev)),t},o};n.path=s},{"./form.js":32,"./store.js":57}],49:[function(t,e,n){var r,i=t("../form.js"),s=function(t){"use strict";window.confirm("Are you sure? This is permanent.")&&$.ajax({type:"DELETE",url:"/projects/"+t,dataType:"json",contentType:"application/json",complete:function(t){204===t.status?r():window.alert("An error occurred"+t.status)}})},o=function(){"use strict";var t=$("#project-name"),e=$("#project-description"),n=$(".validate-tips"),s=$([]).add(t).add(e),o=$("#add-dialog").dialog({autoOpen:!1,modal:!0,buttons:{"Add project":function(){s.removeClass("ui-state-error"),$(".validation-error-message").remove();var o=i.checkLength(t,"project name",1,50,n);o&&($.ajax({type:"POST",url:"projects/index",dataType:"json",contentType:"application/json",processData:!1,data:JSON.stringify({name:t.val(),description:e.val()}),complete:function(t){201===t.status?r():window.alert("An error occurred "+t.status)}}),$(this).dialog("close"))},Cancel:function(){$(this).dialog("close")}},close:function(){s.val("").removeClass("ui-state-error")}});return o},u=function(t){"use strict";var e=$(t).attr("id");return s(e),!0};r=function(){"use strict";var t="/projects/index";$.get(t,function(t){$("tbody").empty(),$("tbody").html(t)})},n.add=o,n.del=u,n.init=r},{"../form.js":32}],50:[function(t,e,n){var r=function(t,e){"use strict";var n=t.some(function(t){return e===t});return n},i=function(t,e){"use strict";e||(e=r);var n=t.reduce(function(t,n){return e(t,n)?t:t.concat([n])},[]);return n},s=function(t,e,n){"use strict";n||(n=r);var s=i(t.concat(e),n);return s},o=function(t,e,n){"use strict";n||(n=r);var i=t.filter(function(t){return n(e,t)});return i},u=function(t,e,n){"use strict";n||(n=r);var i=t.filter(function(t){return!n(e,t)});return i},a=function(t,e,n){"use strict";n||(n=r);var i=u(t,e,n),o=u(e,t,n),a=s(i,o,n);return a};n.member=r,n.unique=i,n.union=s,n.intersection=o,n.relativeComplement=u,n.symmetricDifference=a},{}],"hogan.js":[function(t,e){e.exports=t("nLm5Ax")},{}],"Bacon.js":[function(t,e){e.exports=t("EMvo/m")},{}],53:[function(t,e,n){var r=function(t){"use strict";return t};(function(){"use strict";return Function.prototype.r=function(){return[this,arguments]},Function.prototype.t=function(){for(var t=[this,arguments],e=arguments[arguments.length-1];t[0]!==e;)t=t[0].apply(this,t[1]);return e.apply(this,t[1])},!0})(),n.identity=r},{}],"templates.js":[function(t,e){e.exports=t("e8H8MT")},{}],55:[function(t,e,n){var r=t("./documents/commands.js"),i=t("./documents/documents.js"),s=t("./documents/editui.js"),o=t("./documents/searchui.js"),u=t("./documents/setsui.js"),a=t("./documents/worksheetui.js"),c=function(t,e){"use strict";var n;switch(t){case"bad-session-state":n=i.clearSession();break;case"doctype-info-ready":n=i.makeLabels();break;case"labels-ready":n=o.loadSearchVals(),a.buildTemplate();break;case"new-set-form-submit":n=u.saveSelected();break;case"sets-changed":n=u.updateSelection();break;case"sets-form-submit":n=u.performOp();break;case"session-cleared":i.setVersion(),n=i.loadDoctype();break;case"worksheet-form-submit":n=a.fillWorksheet();break;case"initiated-command":n=r.dialogOpen(e);break;case"executed-command":n=r.dialogClose();break;case"submitted-command":n=r.execute(e);break;case"lost-focus":n=s.selectInput()}return n};n.sender=c},{"./documents/commands.js":21,"./documents/documents.js":22,"./documents/editui.js":23,"./documents/searchui.js":26,"./documents/setsui.js":27,"./documents/worksheetui.js":29}],56:[function(t,e,n){var r=function(t){"use strict";return window.sessionStorage[t._id]||(window.sessionStorage[t._id]=JSON.stringify(t)),t._id},i=function(t){"use strict";var e=window.sessionStorage[t];return e?JSON.parse(e):null};n.put=r,n.get=i},{}],57:[function(t,e,n){var r=t("./utils.js"),i=t("./recurse.js"),s=function(t){"use strict";return t.replace(/-./,function(t){return t.toUpperCase()[1]})},o=function(t){"use strict";var e={};return void 0===t.dataset&&(t=t[0]),e.get=function(e){var n=s(e),r=t.dataset[n];if(r)return r;var o=function(t,e,n){var r=e.dataset.groupId,i=document.getElementById(r),s=i.dataset[t],u=i.dataset.groupId;return void 0===s&&void 0!==u&&r!==u?o.r(t,i,n):n.r(s)};return o.t(n,t,i.identity)},e.get64=function(t){var n=e.get(t);return n=r.Base64.decode(n.replace(/'/g,"")).replace(/(^'|'$)/g,"")},e.put=function(e,n){var r=s(e),i=t.dataset.groupId;document.getElementById(i).dataset[r]=n},e.fs=function(t){return e.get("fieldset-"+t)},e.f=function(t){return e.get("field-"+t)},e.d=function(t){return e.get("document-"+t)},e};n.store=o},{"./recurse.js":53,"./utils.js":58}],58:[function(t,e,n){var r=function(t){"use strict";return"string"!=typeof t||isNaN(t)||""===t?"":1*t},i=function(t){"use strict";return/^\s*$/.test(t)||null===t||void 0===t||"number"==typeof t&&isNaN(t)||"[object Array]"===Object.prototype.toString.call(t)&&0===t.length},s=function(t){"use strict";return!!t.match(/^[a-f0-9]{32}$/)},o={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(t){"use strict";var e,n,r,i,s,u,a,c="",l=0;for(t=o._utf8_encode(t);t.length>l;)e=t.charCodeAt(l++),n=t.charCodeAt(l++),r=t.charCodeAt(l++),i=e>>2,s=(3&e)<<4|n>>4,u=(15&n)<<2|r>>6,a=63&r,isNaN(n)?u=a=64:isNaN(r)&&(a=64),c=c+this._keyStr.charAt(i)+this._keyStr.charAt(s)+this._keyStr.charAt(u)+this._keyStr.charAt(a);return c},decode:function(t){"use strict";var e,n,r,i,s,u,a,c="",l=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");t.length>l;)i=this._keyStr.indexOf(t.charAt(l++)),s=this._keyStr.indexOf(t.charAt(l++)),u=this._keyStr.indexOf(t.charAt(l++)),a=this._keyStr.indexOf(t.charAt(l++)),e=i<<2|s>>4,n=(15&s)<<4|u>>2,r=(3&u)<<6|a,c+=String.fromCharCode(e),64!==u&&(c+=String.fromCharCode(n)),64!==a&&(c+=String.fromCharCode(r));return c=o._utf8_decode(c)},_utf8_encode:function(t){"use strict";t=t.replace(/\r\n/g,"\n");for(var e="",n=0;t.length>n;n++){var r=t.charCodeAt(n);128>r?e+=String.fromCharCode(r):r>127&&2048>r?(e+=String.fromCharCode(192|r>>6),e+=String.fromCharCode(128|63&r)):(e+=String.fromCharCode(224|r>>12),e+=String.fromCharCode(128|63&r>>6),e+=String.fromCharCode(128|63&r))}return e},_utf8_decode:function(t){"use strict";for(var e="",n=0,r=0,i=0,s=0;t.length>n;)r=t.charCodeAt(n),128>r?(e+=String.fromCharCode(r),n++):r>191&&224>r?(i=t.charCodeAt(n+1),e+=String.fromCharCode((31&r)<<6|63&i),n+=2):(i=t.charCodeAt(n+1),s=t.charCodeAt(n+2),e+=String.fromCharCode((15&r)<<12|(63&i)<<6|63&s),n+=3);return e}};n.stringToNumber=r,n.isBlank=i,n.validID=s,n.Base64=o},{}],e8H8MT:[function(t,e){var n=t("hogan.js"),r={"changelog-element":new n.Template(function(t,e,n){var r=this;return r.b(n=n||""),r.s(r.f("doc",t,e,1),t,e,0,8,777,"{{ }}")&&(r.rs(t,e,function(t,e,r){r.b('<tr class="change-header" id="'),r.b(r.v(r.f("id",t,e,0))),r.b('">'),r.b("\n"+n),r.b("  <th"),r.b("\n"+n),r.s(r.f("firstrow",t,e,1),t,e,0,73,188,"{{ }}")&&(r.rs(t,e,function(t,e,r){r.b('      id="first-'),r.b(r.v(r.f("prefix",t,e,0))),r.b('-element"'),r.b("\n"+n),r.b('      data-first-id="'),r.b(r.v(r.f("id",t,e,0))),r.b('"'),r.b("\n"+n),r.b('      data-first-key="'),r.b(r.v(r.f("encoded_key",t,e,0))),r.b('"'),r.b("\n"+n),r.b("    ")}),t.pop()),r.b(">"),r.b("\n"+n),r.b("    <a"),r.b("\n"+n),r.b('      href="#'),r.b(r.v(r.f("document_id",t,e,0))),r.b('"'),r.b("\n"+n),r.b('      class="view-document-link">'),r.b("\n"+n),r.b("      "),r.s(r.f("head_values",t,e,1),t,e,0,298,305,"{{ }}")&&(r.rs(t,e,function(t,e,n){n.b(n.v(n.d(".",t,e,0)))}),t.pop()),r.b("\n"+n),r.b("    </a>"),r.b("\n"+n),r.b("  </th>"),r.b("\n"+n),r.b("  <td>"),r.b("\n"+n),r.b("    "),r.b(r.v(r.f("change_type",t,e,0))),r.b("\n"+n),r.b("  </td>"),r.b("\n"+n),r.b("  <td>"),r.b("\n"+n),r.b("    "),r.b(r.v(r.f("user",t,e,0))),r.b("\n"+n),r.b("  </td>"),r.b("\n"+n),r.b("  <td>"),r.b("\n"+n),r.b("    "),r.b(r.v(r.f("timestamp",t,e,0))),r.b("\n"+n),r.b("  </td>"),r.b("\n"+n),r.b("</tr>"),r.b("\n"+n),r.s(r.f("changes",t,e,1),t,e,0,459,764,"{{ }}")&&(r.rs(t,e,function(t,e,r){r.b('  <tr class="change-change">'),r.b("\n"+n),r.b("    <th>"),r.b("\n"+n),r.b("      "),r.b(r.v(r.f("fieldsetLabel",t,e,0))),r.b(": "),r.b(r.v(r.f("fieldLabel",t,e,0))),r.b("\n"+n),r.b("    </th>"),r.b("\n"+n),r.b("    <td colspan=3>"),r.b("\n"+n),r.s(r.f("originalValue",t,e,1),t,e,1,0,0,"")||(r.b("      <b>Ø</b>"),r.b("\n")),r.b("      "),r.b(r.v(r.f("originalValue",t,e,0))),r.b("\n"+n),r.b("      →"),r.b("\n"+n),r.s(r.f("newValue",t,e,1),t,e,1,0,0,"")||(r.b("      <b>Ø</b>"),r.b("\n")),r.b("      "),r.b(r.v(r.f("newValue",t,e,0))),r.b("\n"+n),r.b("    </td>"),r.b("\n"+n),r.b("  </tr>"),r.b("\n")}),t.pop())}),t.pop()),r.fl()}),"charseqs-element":new n.Template(function(t,e,n){var r=this;return r.b(n=n||""),r.b('<tr id="'),r.b(r.v(r.f("id",t,e,0))),r.b('">'),r.b("\n"+n),r.b("  <th"),r.b("\n"+n),r.s(r.f("firstrow",t,e,1),t,e,0,42,157,"{{ }}")&&(r.rs(t,e,function(t,e,r){r.b('      id="first-'),r.b(r.v(r.f("prefix",t,e,0))),r.b('-element"'),r.b("\n"+n),r.b('      data-first-id="'),r.b(r.v(r.f("id",t,e,0))),r.b('"'),r.b("\n"+n),r.b('      data-first-key="'),r.b(r.v(r.f("encoded_key",t,e,0))),r.b('"'),r.b("\n"+n),r.b("    ")}),t.pop()),r.b(">"),r.b("\n"+n),r.b("    "),r.b(r.v(r.f("key",t,e,0))),r.b("\n"+n),r.b("  </th>"),r.b("\n"+n),r.b("  <td>"),r.b("\n"+n),r.b("    "),r.b(r.v(r.f("value",t,e,0))),r.b("\n"+n),r.b("   </td>"),r.b("\n"+n),r.b("</tr>"),r.b("\n"),r.fl()}),"config-maintenance":new n.Template(function(t,e,n){var r=this;return r.b(n=n||""),r.b('<div id="maintenance">'),r.b("\n"+n),r.b("  <h3>Upgrade Project</h3>"),r.b("\n"+n),r.b("\n"+n),r.b("  <p>"),r.b("\n"+n),r.b("    Clicking the button below will initiate an upgrade of the project"),r.b("\n"+n),r.b("    core design document to the latest version available on your"),r.b("\n"+n),r.b("    system."),r.b("\n"+n),r.b("  </p>"),r.b("\n"+n),r.b("  <p>"),r.b("\n"+n),r.b("    Be aware that this may cause significant slowness on your system"),r.b("\n"+n),r.b("    while view indexes are rebuilt."),r.b("\n"+n),r.b("  </p>"),r.b("\n"+n),r.b("\n"+n),r.b('  <a id="maintenance-upgrade-button" class="maintenance-upgrade-button link-button">Upgrade</a>'),r.b("\n"+n),r.b("</div>"),r.b("\n"),r.fl()}),"doctypes-element":new n.Template(function(t,e,n){var r=this;return r.b(n=n||""),r.b('<tr id="'),r.b(r.v(r.f("id",t,e,0))),r.b('">'),r.b("\n"+n),r.b("  <th"),r.b("\n"+n),r.s(r.f("firstrow",t,e,1),t,e,0,42,157,"{{ }}")&&(r.rs(t,e,function(t,e,r){r.b('      id="first-'),r.b(r.v(r.f("prefix",t,e,0))),r.b('-element"'),r.b("\n"+n),r.b('      data-first-id="'),r.b(r.v(r.f("id",t,e,0))),r.b('"'),r.b("\n"+n),r.b('      data-first-key="'),r.b(r.v(r.f("encoded_key",t,e,0))),r.b('"'),r.b("\n"+n),r.b("    ")}),t.pop()),r.b(">"),r.b("\n"+n),r.b("    "),r.b(r.v(r.f("key",t,e,0))),r.b("\n"+n),r.b("  </th>"),r.b("\n"+n),r.b("  <td>"),r.b("\n"+n),r.b("    "),r.b(r.v(r.f("value",t,e,0))),r.b("\n"+n),r.b("   </td>"),r.b("\n"+n),r.b("</tr>"),r.b("\n"),r.fl()}),"document-view-field":new n.Template(function(t,e,n){var r=this;return r.b(n=n||""),r.b("<li "),r.b("\n"+n),r.b('  class="field-view '),r.b("\n"+n),r.b("    "),r.s(r.f("changed",t,e,1),t,e,0,42,49,"{{ }}")&&(r.rs(t,e,function(t,e,n){n.b("changed")}),t.pop()),r.b('"'),r.b("\n"+n),r.b('  data-field-field="'),r.b(r.v(r.f("id",t,e,0))),r.b('"'),r.b("\n"+n),r.s(r.f("instance",t,e,1),t,e,0,108,150,"{{ }}")&&(r.rs(t,e,function(t,e,n){n.b('  data-field-instance="'),n.b(n.v(n.f("instance",t,e,0))),n.b('"'),n.b("\n")}),t.pop()),r.b('  data-field-value="'),r.b(r.v(r.f("json_value",t,e,0))),r.b('">'),r.b("\n"+n),r.b("  <b>"),r.b(r.v(r.f("label",t,e,0))),r.b("</b>"),r.s(r.f("changed",t,e,1),t,e,0,235,343,"{{ }}")&&(r.rs(t,e,function(t,e,n){n.s(n.f("newfield",t,e,1),t,e,1,0,0,"")||(n.b('<span class="small-control view-field-change" title="'),n.b(n.v(n.f("originalValue",t,e,0))),n.b('">→</span>'))}),t.pop()),r.b(":"),r.b("\n"+n),r.s(r.f("is_textarea",t,e,1),t,e,0,375,426,"{{ }}")&&(r.rs(t,e,function(t,e,n){n.b('    <span class="retain-white">'),n.b(n.v(n.f("value",t,e,0))),n.b("</span>"),n.b("\n")}),t.pop()),r.s(r.f("is_textarea",t,e,1),t,e,1,0,0,"")||(r.b("    "),r.b(r.v(r.f("value",t,e,0))),r.b("\n")),r.b("</li>"),r.b("\n"),r.fl()}),"document-view-tree":new n.Template(function(t,e,n){var r=this;return r.b(n=n||""),r.s(r.f("previous_revision",t,e,1),t,e,0,22,76,"{{ }}")&&(r.rs(t,e,function(t,e,n){n.b('  <div id="revision-message">Previous Revision</div>'),n.b("\n")}),t.pop()),r.b("\n"+n),r.s(r.f("deleted_",t,e,1),t,e,0,113,163,"{{ }}")&&(r.rs(t,e,function(t,e,n){n.b('  <div id="deleted-message"><b>Deleted</b></div>'),n.b("\n")}),t.pop()),r.b("\n"+n),r.b("<ul>"),r.b("\n"+n),r.s(r.f("fieldsets",t,e,1),t,e,0,197,975,"{{ }}")&&(r.rs(t,e,function(t,e,r){r.b("  <li"),r.b("\n"+n),r.b('    class="fieldset-view'),r.b("\n"+n),r.b("      "),r.s(r.f("collapse",t,e,1),t,e,0,248,257,"{{ }}")&&(r.rs(t,e,function(t,e,n){n.b("collapsed")}),t.pop()),r.b("\n"+n),r.b("      "),r.s(r.f("altered",t,e,1),t,e,0,289,296,"{{ }}")&&(r.rs(t,e,function(t,e,n){n.b("changed")}),t.pop()),r.b('"'),r.b("\n"+n),r.b('    data-fieldset-fieldset="'),r.b(r.v(r.f("id",t,e,0))),r.b('" '),r.b("\n"+n),r.b('    data-group-id="'),r.b(r.v(r.f("id",t,e,0))),r.b('">'),r.b("\n"+n),r.b("    <b>"),r.b(r.v(r.f("label",t,e,0))),r.b("</b>"),r.s(r.f("addition",t,e,1),t,e,0,414,468,"{{ }}")&&(r.rs(t,e,function(t,e,n){n.b('<span title="fieldset added" class="addition">+</span>')}),t.pop()),r.s(r.f("removal",t,e,1),t,e,0,493,548,"{{ }}")&&(r.rs(t,e,function(t,e,n){n.b('<span title="fieldset removed" class="removal">−</span>')}),t.pop()),r.b(":"),r.b("\n"+n),r.s(r.f("multiple",t,e,1),t,e,0,579,818,"{{ }}")&&(r.rs(t,e,function(t,e,r){r.b("      <ol>"),r.b("\n"+n),r.s(r.f("multifields",t,e,1),t,e,0,613,785,"{{ }}")&&(r.rs(t,e,function(t,e,r){r.b("        <li>"),r.b("\n"+n),r.b('          <ul class="multifield">'),r.b("\n"+n),r.s(r.f("fields",t,e,1),t,e,0,684,737,"{{ }}")&&(r.rs(t,e,function(t,e,n){n.b(n.rp("document-view-field",t,e,"              "))}),t.pop()),r.b("          </ul>"),r.b("\n"+n),r.b("        </li>"),r.b("\n")}),t.pop()),r.b("      </ol>"),r.b("\n")}),t.pop()),r.s(r.f("multiple",t,e,1),t,e,1,0,0,"")||(r.b("      <ul>"),r.b("\n"+n),r.s(r.f("fields",t,e,1),t,e,0,880,925,"{{ }}")&&(r.rs(t,e,function(t,e,n){n.b(n.rp("document-view-field",t,e,"          "))}),t.pop()),r.b("      </ul>"),r.b("\n")),r.b("  </li>"),r.b("\n")}),t.pop()),r.b("</ul>"),r.b("\n"+n),r.b("\n"+n),r.b('<div class="timestamps">'),r.b("\n"+n),r.b("  <dl>"),r.b("\n"+n),r.b('    <dt>Created At</dt><dd class="timestamp">'),r.b(r.v(r.f("created_at_",t,e,0))),r.b("</dd>"),r.b("\n"+n),r.b("    <dt>Created By</dt><dd>"),r.b(r.v(r.f("created_by_",t,e,0))),r.b("</dd>"),r.b("\n"+n),r.b('    <dt>Updated At</dt><dd class="timestamp">'),r.b(r.v(r.f("updated_at_",t,e,0))),r.b("</dd>"),r.b("\n"+n),r.b("    <dt>Updated By</dt><dd>"),r.b(r.v(r.f("updated_by_",t,e,0))),r.b("</dd>"),r.b("\n"+n),r.b("    <dt>ID</dt><dd>"),r.b(r.v(r.f("_id",t,e,0))),r.b("</dd>"),r.b("\n"+n),r.b("  </dl>"),r.b("\n"+n),r.b("</div>"),r.b("\n"),r.fl()}),"document-view":new n.Template(function(t,e,n){var r=this;return r.b(n=n||""),r.s(r.f("doctype_info",t,e,1),t,e,0,17,197,"{{ }}")&&(r.rs(t,e,function(t,e,r){r.b('  <h2 class="header">'),r.b(r.v(r.f("_id",t,e,0))),r.b(" View</h2>"),r.b("\n"+n),r.b("\n"+n),r.b('  <form id="view-jump">'),r.b("\n"+n),r.b('    <label for="view-jump-id">Id</label>'),r.b("\n"+n),r.b('    <input type="text" id="view-jump-id" name="view-jump-id">'),r.b("\n"+n),r.b("  </form>"),r.b("\n")}),t.pop()),r.b("\n"+n),r.b('<div id="document-view-info"'),r.b("\n"+n),r.b('     data-document-deleted="'),r.b(r.v(r.f("deleted_",t,e,0))),r.b('"'),r.b("\n"+n),r.b('     data-document-document="'),r.b(r.v(r.f("_id",t,e,0))),r.b('" '),r.b("\n"+n),r.b('     data-document-rev="'),r.b(r.v(r.f("_rev",t,e,0))),r.b('"></div>'),r.b("\n"+n),r.b("\n"+n),r.b('<a id="document-restore-button"'),r.b("\n"+n),r.b('   data-group-id="document-view-info"'),r.b("\n"+n),r.b('   class="link-button hidden">Restore</a>'),r.b("\n"+n),r.b("\n"+n),r.b('<a id="document-edit-button"'),r.b("\n"+n),r.b('   data-group-id="document-view-info"'),r.b("\n"+n),r.b('   class="link-button">Edit</a>'),r.b("\n"+n),r.b("\n"+n),r.b('<a id="document-delete-button"'),r.b("\n"+n),r.b('   data-group-id="document-view-info"'),r.b("\n"+n),r.b('   class="link-button">Delete</a>'),r.b("\n"+n),r.b("\n"+n),r.b('<nav id="history">'),r.b("\n"+n),r.s(r.f("revs_info",t,e,1),t,e,0,726,1001,"{{ }}")&&(r.rs(t,e,function(t,e,r){r.s(r.f("status",t,e,1),t,e,0,742,985,"{{ }}")&&(r.rs(t,e,function(t,e,r){r.b('      <a href="#'),r.b(r.v(r.f("_id",t,e,0))),r.b('"'),r.b("\n"+n),r.b('         class="revision-link"'),r.b("\n"+n),r.b('         data-group-id="document-view-info"'),r.b("\n"+n),r.s(r.f("first",t,e,1),t,e,0,864,910,"{{ }}")&&(r.rs(t,e,function(t,e,n){n.b('         id="current-revision-link"'),n.b("\n")}),t.pop()),r.b('         data-document-oldrev="'),r.b(r.v(r.f("rev",t,e,0))),r.b('">'),r.b(r.v(r.f("count",t,e,0))),r.b("</a>"),r.b("\n")}),t.pop())}),t.pop()),r.b("</nav>"),r.b("\n"+n),r.b("\n"+n),r.b('<div id="document-view-tree">'),r.b("\n"+n),r.b(r.rp("document-view-tree",t,e,"  ")),r.b("</div>"),r.b("\n"),r.fl()}),"index-element":new n.Template(function(t,e,n){var r=this;return r.b(n=n||""),r.b('<tr class="change-header" id="'),r.b(r.v(r.f("id",t,e,0))),r.b('">'),r.b("\n"+n),r.b("  <th"),r.b("\n"+n),r.s(r.f("firstrow",t,e,1),t,e,0,64,179,"{{ }}")&&(r.rs(t,e,function(t,e,r){r.b('      id="first-'),r.b(r.v(r.f("prefix",t,e,0))),r.b('-element"'),r.b("\n"+n),r.b('      data-first-id="'),r.b(r.v(r.f("id",t,e,0))),r.b('"'),r.b("\n"+n),r.b('      data-first-key="'),r.b(r.v(r.f("encoded_key",t,e,0))),r.b('"'),r.b("\n"+n),r.b("    ")}),t.pop()),r.b(">"),r.b("\n"+n),r.b('    <ul class="head-elements">'),r.b("\n"+n),r.s(r.f("display_key",t,e,1),t,e,0,247,362,"{{ }}")&&(r.rs(t,e,function(t,e,r){r.b("        <li>"),r.b("\n"+n),r.b('          <a href="#'),r.b(r.v(r.f("id",t,e,0))),r.b('"'),r.b("\n"+n),r.b('            class="view-document-link">'),r.b(r.v(r.d(".",t,e,0))),r.b("</a>"),r.b("\n"+n),r.b("        </li>"),r.b("\n")}),t.pop()),r.b("    </ul>"),r.b("\n"+n),r.b("  </th>"),r.b("\n"+n),r.b("  <td>"),r.b("\n"+n),r.b('    <ul class="reversal-elements">'),r.b("\n"+n),r.s(r.f("value",t,e,1),t,e,0,455,487,"{{ }}")&&(r.rs(t,e,function(t,e,n){n.b("        <li>"),n.b(n.v(n.d(".",t,e,0))),n.b("</li>"),n.b("\n")}),t.pop()),r.b("    </ul>"),r.b("\n"+n),r.b("  </td>"),r.b("\n"+n),r.b("</tr>"),r.b("\n"),r.fl()}),"index-listing":new n.Template(function(t,e,n){var r=this;return r.b(n=n||""),r.b("<table>"),r.b("\n"+n),r.b("  <thead>"),r.b("\n"+n),r.b("    <th>Name</th>"),r.b("\n"+n),r.b("    <th>Doctype</th>"),r.b("\n"+n),r.b("  </thead>"),r.b("\n"+n),r.b("  <tbody>"),r.b("\n"+n),r.s(r.f("rows",t,e,1),t,e,0,91,210,"{{ }}")&&(r.rs(t,e,function(t,e,r){r.b("    <tr>"),r.b("\n"+n),r.b('      <th><a href="#" data-index-id="'),r.b(r.v(r.f("id",t,e,0))),r.b('">'),r.b(r.v(r.d("key.1",t,e,0))),r.b("</a></th> "),r.b("\n"+n),r.b("      <td>"),r.b(r.v(r.d("key.0",t,e,0))),r.b("</td>"),r.b("\n"+n),r.b("    </tr>"),r.b("\n")}),t.pop()),r.b("  </tbody>"),r.b("\n"+n),r.b("</table>"),r.fl()}),"index-options":new n.Template(function(t,e,n){var r=this;return r.b(n=n||""),r.b("<option></option>"),r.b("\n"+n),r.s(r.f("rows",t,e,1),t,e,0,27,74,"{{ }}")&&(r.rs(t,e,function(t,e,n){n.b('<option value="'),n.b(n.v(n.f("id",t,e,0))),n.b('">'),n.b(n.v(n.d("key.1",t,e,0))),n.b("</option>"),n.b("\n")}),t.pop()),r.fl()}),"paged-listing":new n.Template(function(t,e,n){var r=this;return r.b(n=n||""),r.b('<nav class="pager">'),r.b("\n"+n),r.b("<a"),r.b("\n"+n),r.b('  href="#" '),r.b("\n"+n),r.b('  title="Previous Page"'),r.b("\n"+n),r.b('  id="previous-'),r.b(r.v(r.f("prefix",t,e,0))),r.b('-page"'),r.b("\n"+n),r.b('  class="pager-button link-button"'),r.b("\n"+n),r.b(">Prev</a> "),r.b("\n"+n),r.b("<a"),r.b("\n"+n),r.b('  href="#"'),r.b("\n"+n),r.b('  title="Next Page"'),r.b("\n"+n),r.b('  class="pager-button link-button"'),r.b("\n"+n),r.b('  id="next-'),r.b(r.v(r.f("prefix",t,e,0))),r.b('-page"'),r.b("\n"+n),r.s(r.f("lastpage",t,e,1),t,e,0,322,351,"{{ }}")&&(r.rs(t,e,function(t,e,n){n.b('    data-last-page="true"'),n.b("\n")}),t.pop()),r.s(r.f("lastrow",t,e,1),t,e,0,379,448,"{{ }}")&&(r.rs(t,e,function(t,e,r){r.b('    data-startkey="'),r.b(r.v(r.f("encoded_key",t,e,0))),r.b('"'),r.b("\n"+n),r.b('    data-startid="'),r.b(r.v(r.f("id",t,e,0))),r.b('"'),r.b("\n")}),t.pop()),r.b(">Next</a>"),r.b("\n"+n),r.b("</nav>"),r.b("\n"+n),r.b('<div class="total-rows-info">'),r.b("\n"+n),r.b("  <b>Total</b>: "),r.b(r.v(r.f("total_rows",t,e,0))),r.b("\n"+n),r.b("</div>"),r.b("\n"+n),r.b("<table>"),r.b("\n"+n),r.s(r.f("rows",t,e,1),t,e,0,567,595,"{{ }}")&&(r.rs(t,e,function(t,e,n){n.b(n.rp("listed-element",t,e,"    "))}),t.pop()),r.b("</table>"),r.b("\n"),r.fl()}),"preview-element":new n.Template(function(t,e,n){var r=this;return r.b(n=n||""),r.b('<tr class="change-header" id="'),r.b(r.v(r.f("id",t,e,0))),r.b('">'),r.b("\n"+n),r.b("  <th"),r.b("\n"+n),r.s(r.f("firstrow",t,e,1),t,e,0,64,179,"{{ }}")&&(r.rs(t,e,function(t,e,r){r.b('      id="first-'),r.b(r.v(r.f("prefix",t,e,0))),r.b('-element"'),r.b("\n"+n),r.b('      data-first-id="'),r.b(r.v(r.f("id",t,e,0))),r.b('"'),r.b("\n"+n),r.b('      data-first-key="'),r.b(r.v(r.f("encoded_key",t,e,0))),r.b('"'),r.b("\n"+n),r.b("    ")}),t.pop()),r.b(">"),r.b("\n"+n),r.b('    <ul class="head-elements">'),r.b("\n"+n),r.s(r.f("display_key",t,e,1),t,e,0,247,279,"{{ }}")&&(r.rs(t,e,function(t,e,n){n.b("        <li>"),n.b(n.v(n.d(".",t,e,0))),n.b("</li>"),n.b("\n")}),t.pop()),r.b("    </ul>"),r.b("\n"+n),r.b("  </th>"),r.b("\n"+n),r.b("  <td>"),r.b("\n"+n),r.b('    <ul class="reversal-elements">'),r.b("\n"+n),r.b("      "),r.b(r.v(r.f("value",t,e,0))),r.b("\n"+n),r.b("    </ul>"),r.b("\n"+n),r.b("  </td>"),r.b("\n"+n),r.b("</tr>"),r.b("\n"),r.fl()}),"search-field-item":new n.Template(function(t,e,n){var r=this;
return r.b(n=n||""),r.b("<a class='search-field-item' "),r.b("\n"+n),r.b("  title='click to remove' "),r.b("\n"+n),r.b("  data-field-field='"),r.b(r.v(r.f("field",t,e,0))),r.b("' "),r.b("\n"+n),r.b("  href='#'>"),r.b(r.v(r.f("fieldLabel",t,e,0))),r.b("</a>"),r.b("\n"),r.fl()}),"set-listing":new n.Template(function(t,e,n){var r=this;return r.b(n=n||""),r.b('<div class="total-rows-info">'),r.b("\n"+n),r.b('  <b>Total</b>: <span id="total-set-rows">'),r.b(r.v(r.f("total",t,e,0))),r.b("</span>"),r.b("\n"+n),r.b("</div>"),r.b("\n"+n),r.b('<div id="save-set-results">'),r.b("\n"+n),r.b('  <a href="#">(Save Selected)</a>'),r.b("\n"+n),r.b("</div>"),r.b("\n"+n),r.b('<table id="set-elements">'),r.b("\n"+n),r.b("  <thead>"),r.b("\n"+n),r.b("    <tr>"),r.b("\n"+n),r.b("      <td>"),r.b("\n"+n),r.b('        <input type="checkbox" id="select-all-set-elements" title="Click to select or deselect all elements" />'),r.b("\n"+n),r.b("      </td>"),r.b("\n"+n),r.b("      <th>"),r.b("\n"+n),r.b("        Elements"),r.b("\n"+n),r.b("      </th>"),r.b("\n"+n),r.b("    </tr>"),r.b("\n"+n),r.b("  </thead>"),r.b("\n"+n),r.b("  <tbody>"),r.b("\n"+n),r.s(r.f("elements",t,e,1),t,e,0,435,674,"{{ }}")&&(r.rs(t,e,function(t,e,r){r.b("    <tr>"),r.b("\n"+n),r.b("      <td>"),r.b("\n"+n),r.b('        <input type="checkbox" class="set-element-selection" title="Click to select element" />'),r.b("\n"+n),r.b("      </td>"),r.b("\n"+n),r.b("      <td>"),r.b("\n"+n),r.b('        <a class="view-document-link" href="#'),r.b(r.v(r.f("id",t,e,0))),r.b('">'),r.b(r.v(r.f("context",t,e,0))),r.b("</a>"),r.b("\n"+n),r.b("      </td>"),r.b("\n"+n),r.b("    </tr>"),r.b("\n")}),t.pop()),r.b("  </tbody>"),r.b("\n"+n),r.b("</table>"),r.b("\n"),r.fl()}),"set-options":new n.Template(function(t,e,n){var r=this;return r.b(n=n||""),r.b("<option></option>"),r.b("\n"+n),r.s(r.f("names",t,e,1),t,e,0,28,66,"{{ }}")&&(r.rs(t,e,function(t,e,n){n.b('<option value="'),n.b(n.v(n.d(".",t,e,0))),n.b('">'),n.b(n.v(n.d(".",t,e,0))),n.b("</option>"),n.b("\n")}),t.pop()),r.fl()}),"simple-to-form-field":new n.Template(function(t,e,n){var r=this;return r.b(n=n||""),r.b("<li>"),r.b("\n"+n),r.b('  <label for="'),r.b(r.v(r.f("key",t,e,0))),r.b('">'),r.b(r.v(r.f("key",t,e,0))),r.b("</label>"),r.b("\n"+n),r.s(r.f("text",t,e,1),t,e,1,0,0,"")||(r.b('  <input type="'),r.s(r.f("string",t,e,1),t,e,0,86,90,"{{ }}")&&(r.rs(t,e,function(t,e,n){n.b("text")}),t.pop()),r.s(r.f("number",t,e,1),t,e,0,112,118,"{{ }}")&&(r.rs(t,e,function(t,e,n){n.b("number")}),t.pop()),r.b('" name="'),r.b(r.v(r.f("key",t,e,0))),r.b('" value="'),r.b(r.v(r.f("val",t,e,0))),r.b('"/>'),r.b("\n")),r.s(r.f("text",t,e,1),t,e,0,191,246,"{{ }}")&&(r.rs(t,e,function(t,e,n){n.b('    <textarea name="'),n.b(n.v(n.f("key",t,e,0))),n.b('">'),n.b(n.v(n.f("val",t,e,0))),n.b("</textarea>"),n.b("\n")}),t.pop()),r.b("</li>"),r.b("\n"),r.fl()}),"simple-to-form":new n.Template(function(t,e,n){var r=this;return r.b(n=n||""),r.b("<form>"),r.b("\n"+n),r.b("  <ul>"),r.b("\n"+n),r.s(r.f("fields",t,e,1),t,e,0,29,67,"{{ }}")&&(r.rs(t,e,function(t,e,n){n.b(n.rp("simple-to-form-field",t,e,"      "))}),t.pop()),r.b("  </ul>"),r.b("\n"+n),r.b("</form>"),r.b("\n"),r.fl()}),worksheet:new n.Template(function(t,e,n){var r=this;return r.b(n=n||""),r.b('<table id="worksheet-table">'),r.b("\n"+n),r.b("  <thead>"),r.b("\n"+n),r.b('    <tr class="header-row">'),r.b("\n"+n),r.b('      <td id="select-all-worksheet-rows-cell"'),r.b("\n"+n),r.b('        class="select-column">'),r.b("\n"+n),r.b("        <input "),r.b("\n"+n),r.b('          id="select-all-worksheet-rows"'),r.b("\n"+n),r.b('          type="checkbox"'),r.b("\n"+n),r.b('          title="Click to select all rows">'),r.b("\n"+n),r.b("      </td>"),r.b("\n"+n),r.s(r.f("fieldsets",t,e,1),t,e,0,303,1494,"{{ }}")&&(r.rs(t,e,function(t,e,r){r.b("        <th "),r.b("\n"+n),r.b('          class="worksheet-handle-header fieldset handle-column '),r.b(r.v(r.f("_id",t,e,0))),r.b('"'),r.b("\n"+n),r.b('          title="'),r.b(r.v(r.f("label",t,e,0))),r.b('">'),r.b("\n"+n),r.b("          <div>"),r.b("\n"+n),r.b("            <span>"),r.b("\n"+n),r.b('              <a class="fieldset-handle" '),r.b("\n"+n),r.b('                data-field-fieldset="'),r.b(r.v(r.f("_id",t,e,0))),r.b('" '),r.b("\n"+n),r.b('                href="#">'),r.b(r.v(r.f("label",t,e,0))),r.b("</a></span></div>"),r.b("\n"+n),r.b("        </th>"),r.b("\n"+n),r.s(r.f("fields",t,e,1),t,e,0,634,1476,"{{ }}")&&(r.rs(t,e,function(t,e,r){r.b("          <th"),r.b("\n"+n),r.b('            class="'),r.s(r.f("multiple",t,e,1),t,e,0,681,689,"{{ }}")&&(r.rs(t,e,function(t,e,n){n.b("multiple")}),t.pop()),r.b(" "),r.s(r.f("collapse",t,e,1),t,e,0,716,724,"{{ }}")&&(r.rs(t,e,function(t,e,n){n.b("collapse")}),t.pop()),r.b(" "),r.b(r.v(r.f("fieldset",t,e,0))),r.b(" "),r.b(r.v(r.f("_id",t,e,0))),r.b(' worksheet-handle-header field handle-column"'),r.b("\n"+n),r.b('            title="'),r.b(r.v(r.f("label",t,e,0))),r.b('">'),r.b("\n"+n),r.b("            <div>"),r.b("\n"+n),r.b("              <span>"),r.b("\n"+n),r.b('                <a class="field-handle" '),r.b("\n"+n),r.b('                  data-field-field="'),r.b(r.v(r.f("_id",t,e,0))),r.b('" '),r.b("\n"+n),r.b('                  href="#">'),r.b(r.v(r.f("label",t,e,0))),r.b("</a></span></div>"),r.b("\n"+n),r.b("          </th>"),r.b("\n"+n),r.b("          <th"),r.b("\n"+n),r.b('            class="'),r.b(r.v(r.f("fieldset",t,e,0))),r.b(" "),r.b(r.v(r.f("_id",t,e,0))),r.b(' field-column"'),r.b("\n"+n),r.b('            title="'),r.b(r.v(r.f("label",t,e,0))),r.b('">'),r.b("\n"+n),r.b('            <a class="field-header" '),r.b("\n"+n),r.b('              data-field-field="'),r.b(r.v(r.f("_id",t,e,0))),r.b('" '),r.b("\n"+n),r.b('              href="#">'),r.b(r.v(r.f("label",t,e,0))),r.b("</a>"),r.b("\n"+n),r.b("            <input "),r.b("\n"+n),r.b('              class="select-worksheet-column"'),r.b("\n"+n),r.b('              data-field-field="'),r.b(r.v(r.f("_id",t,e,0))),r.b('" '),r.b("\n"+n),r.b('              type="checkbox"'),r.b("\n"+n),r.b('              title="Click to select column">'),r.b("\n"+n),r.b("          </td>"),r.b("\n")}),t.pop())}),t.pop()),r.b("    </tr>"),r.b("\n"+n),r.b("  </thead>"),r.b("\n"+n),r.b("  <tbody>"),r.b("\n"+n),r.b("    <%#rows%>"),r.b("\n"+n),r.b('      <tr id="worksheet-row-<% _id %>"'),r.b("\n"+n),r.b('        class="body-row">'),r.b("\n"+n),r.b('        <td class="select-column">'),r.b("\n"+n),r.b("          <input "),r.b("\n"+n),r.b('            class="select-worksheet-row"'),r.b("\n"+n),r.b('            data-row="worksheet-row-<% _id %>"'),r.b("\n"+n),r.b('            type="checkbox"'),r.b("\n"+n),r.b('            title="Click to select row">'),r.b("\n"+n),r.b("        </td>"),r.b("\n"+n),r.s(r.f("fieldsets",t,e,1),t,e,0,1865,2890,"{{ }}")&&(r.rs(t,e,function(t,e,r){r.b('          <td class="'),r.b(r.v(r.f("_id",t,e,0))),r.b(' fieldset handle-column"></td>'),r.b("\n"+n),r.s(r.f("fields",t,e,1),t,e,0,1948,2870,"{{ }}")&&(r.rs(t,e,function(t,e,r){r.b('            <td class="'),r.s(r.f("multiple",t,e,1),t,e,0,1985,1993,"{{ }}")&&(r.rs(t,e,function(t,e,n){n.b("multiple")}),t.pop()),r.b(" "),r.s(r.f("collapse",t,e,1),t,e,0,2020,2028,"{{ }}")&&(r.rs(t,e,function(t,e,n){n.b("collapse")}),t.pop()),r.b(" "),r.b(r.v(r.f("_id",t,e,0))),r.b(" "),r.b(r.v(r.f("fieldset",t,e,0))),r.b(' field handle-column"></td>'),r.b("\n"+n),r.b("            <td"),r.b("\n"+n),r.b('              class="'),r.s(r.f("multiple",t,e,1),t,e,0,2144,2152,"{{ }}")&&(r.rs(t,e,function(t,e,n){n.b("multiple")}),t.pop()),r.b(" "),r.s(r.f("collapse",t,e,1),t,e,0,2179,2187,"{{ }}")&&(r.rs(t,e,function(t,e,n){n.b("collapse")}),t.pop()),r.b(" "),r.b(r.v(r.f("fieldset",t,e,0))),r.b(" "),r.b(r.v(r.f("_id",t,e,0))),r.b(' field-column"'),r.b("\n"+n),r.b('              data-field-fieldset="'),r.b(r.v(r.f("fieldset",t,e,0))),r.b('"'),r.b("\n"+n),r.b('              data-field-field="'),r.b(r.v(r.f("_id",t,e,0))),r.b('">'),r.b("\n"+n),r.b("              <%#"),r.b(r.v(r.f("_id",t,e,0))),r.b("%>"),r.b("\n"+n),r.b("                <%#multiple%>"),r.b("\n"+n),r.b("                <ol>"),r.b("\n"+n),r.b("                  <%#items%>"),r.b("\n"+n),r.b("                    <li"),r.b("\n"+n),r.b('                      data-field-fieldset_instance="<% fieldset_instance %>"'),r.b("\n"+n),r.b('                      data-field-field_instance="<% field_instance %>"><% value %></li>'),r.b("\n"+n),r.b("                  <%/items%>"),r.b("\n"+n),r.b("                </ol>"),r.b("\n"+n),r.b("                <%/multiple%>"),r.b("\n"+n),r.b("                <%#single%>"),r.b("\n"+n),r.b("                  <span><% value %></span>"),r.b("\n"+n),r.b("                <%/single%>"),r.b("\n"+n),r.b("              <%/"),r.b(r.v(r.f("_id",t,e,0))),r.b("%>"),r.b("\n"+n),r.b("            </td>"),r.b("\n")}),t.pop())}),t.pop()),r.b("      </tr>"),r.b("\n"+n),r.b("    <%/rows%>"),r.b("\n"+n),r.b("  </tbody>"),r.b("\n"+n),r.b("</table>"),r.b("\n"),r.fl()})},i=function(t){var e=r[t];return function(t,n,i){return e.render(t,n||r,i)}};e.exports={templates:r,"changelog-element":i("changelog-element"),"charseqs-element":i("charseqs-element"),"config-maintenance":i("config-maintenance"),"doctypes-element":i("doctypes-element"),"document-view-field":i("document-view-field"),"document-view-tree":i("document-view-tree"),"document-view":i("document-view"),"index-element":i("index-element"),"index-listing":i("index-listing"),"index-options":i("index-options"),"paged-listing":i("paged-listing"),"preview-element":i("preview-element"),"search-field-item":i("search-field-item"),"set-listing":i("set-listing"),"set-options":i("set-options"),"simple-to-form-field":i("simple-to-form-field"),"simple-to-form":i("simple-to-form"),worksheet:i("worksheet")}},{"hogan.js":"nLm5Ax"}],"EMvo/m":[function(t,e){(function(){var t,n,r,i,s,o,u,a,c,l,d,f,p,b,h,v,m,g,y,w,j,$,x,k,_,S,E,I,T,C,A,O,D,F,q,N,B,M,V,L,J,P,H,U,R,W,z,Y,K,Q,Z,G,X,te,ee,ne=[].slice,re={}.hasOwnProperty,ie=function(t,e){function n(){this.constructor=t}for(var r in e)re.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},se=function(t,e){return function(){return t.apply(e,arguments)}};t={},t.fromBinder=function(e,n){return null==n&&(n=G.id),new a(function(r){var i;return i=e(function(){var e,s,o,a,c,l;for(e=arguments.length>=1?ne.call(arguments,0):[],a=n.apply(null,e),a instanceof Array&&G.last(a)instanceof u||(a=[a]),o=t.more,c=0,l=a.length;l>c;c++)if(s=a[c],o=r(s=W(s)),o===t.noMore||s.isEnd())return null!=i?i():t.scheduler.setTimeout(function(){return i()},0),o;return o})})},t.$={asEventStream:function(e,n,r){var i,s=this;return F(n)&&(i=[n,null],r=i[0],n=i[1]),t.fromBinder(function(t){return s.on(e,n,t),function(){return s.off(e,n,t)}},r)}},null!=(X="undefined"!=typeof jQuery&&null!==jQuery?jQuery:"undefined"!=typeof Zepto&&null!==Zepto?Zepto:null)&&(X.fn.asEventStream=t.$.asEventStream),t.fromEventTarget=function(e,n,r){var i,s,o,u,a,c;return i=null!=(o=e.addEventListener)?o:null!=(u=e.addListener)?u:e.bind,s=null!=(a=e.removeEventListener)?a:null!=(c=e.removeListener)?c:e.unbind,t.fromBinder(function(t){return i.call(e,n,t),function(){return s.call(e,n,t)}},r)},t.fromPromise=function(e,n){return t.fromBinder(function(t){return e.then(t,function(e){return t(new o(e))}),function(){return n?"function"==typeof e.abort?e.abort():void 0:void 0}},function(t){return[t,T()]})},t.noMore=["<no-more>"],t.more=["<more>"],t.later=function(e,n){return t.sequentially(e,[n])},t.sequentially=function(e,n){var r;return r=0,t.fromPoll(e,function(){var t;return t=n[r++],n.length>r?t:r===n.length?[t,T()]:T()})},t.repeatedly=function(e,n){var r;return r=0,t.fromPoll(e,function(){return n[r++%n.length]})},Z=function(t){return function(){var e,n,r,i;return r=arguments[0],e=arguments.length>=2?ne.call(arguments,1):[],"object"==typeof r&&e.length&&(n=r,i=e[0],r=function(){return n[i].apply(n,arguments)},e=e.slice(1)),t.apply(null,[r].concat(ne.call(e)))}},N=function(e){return Z(function(){var n,r,i;return r=arguments[0],n=arguments.length>=2?ne.call(arguments,1):[],i=H(e,[function(t,e){return r.apply(null,ne.call(t).concat([e]))}]),t.combineAsArray(n).flatMap(i)})},t.fromCallback=N(function(){var e,n;return n=arguments[0],e=arguments.length>=2?ne.call(arguments,1):[],t.fromBinder(function(t){return B(n,e)(t),P},function(t){return[t,T()]})}),t.fromNodeCallback=N(function(){var e,n;return n=arguments[0],e=arguments.length>=2?ne.call(arguments,1):[],t.fromBinder(function(t){return B(n,e)(t),P},function(t,e){return t?[new o(t),T()]:[e,T()]})}),t.fromPoll=function(e,n){return t.fromBinder(function(n){var r;return r=t.scheduler.setInterval(n,e),function(){return t.scheduler.clearInterval(r)}},n)},t.interval=function(e,n){return null==n&&(n={}),t.fromPoll(e,function(){return J(n)})},t.constant=function(t){return new p(U([t],O),!0)},t.never=function(){return t.fromArray([])},t.once=function(e){return t.fromArray([e])},t.fromArray=function(t){return w(t),new a(U(t,W))},U=function(t,e){return function(n){var r,i,s;for(i=0,s=t.length;s>i;i++)r=t[i],n(e(r));return n(T()),P}},t.mergeAll=function(){var e;return e=arguments.length>=1?ne.call(arguments,0):[],e[0]instanceof Array&&(e=e[0]),G.fold(e,t.never(),function(t,e){return t.merge(e)})},t.zipAsArray=function(){var e;return e=arguments.length>=1?ne.call(arguments,0):[],e[0]instanceof Array&&(e=e[0]),t.zipWith(e,function(){var t;return t=arguments.length>=1?ne.call(arguments,0):[]})},t.zipWith=function(){var e,n,r;return e=arguments[0],n=arguments.length>=2?ne.call(arguments,1):[],F(e)||(r=[e,n[0]],n=r[0],e=r[1]),t.when(n,e)},t.combineAsArray=function(){var e,n,r,i,s,o,u;for(s=arguments.length>=1?ne.call(arguments,0):[],1===s.length&&s[0]instanceof Array&&(s=s[0]),e=o=0,u=s.length;u>o;e=++o)i=s[e],i instanceof f||(s[e]=t.constant(i));return s.length?(r=function(){var t,e,r;for(r=[],t=0,e=s.length;e>t;t++)n=s[t],r.push(new m(n,!0,!1,n.subscribeInternal));return r}(),t.when(r,function(){var t;return t=arguments.length>=1?ne.call(arguments,0):[]}).toProperty()):t.constant([])},t.onValues=function(){var e,n,r;return n=arguments.length>=2?ne.call(arguments,0,r=arguments.length-1):(r=0,[]),e=arguments[r++],t.combineAsArray(n).onValues(e)},t.combineWith=function(){var e,n;return e=arguments[0],n=arguments.length>=2?ne.call(arguments,1):[],t.combineAsArray(n).map(function(t){return e.apply(null,t)})},t.combineTemplate=function(e){var n,r,i,s,o,u,a,c,l,d;return a=[],d=[],u=function(t){return t[t.length-1]},l=function(t,e,n){return u(t)[e]=n},n=function(t,e){return function(n,r){return l(n,t,r[e])}},o=function(t,e){return function(n){return l(n,t,e)}},c=function(t){return t instanceof Array?[]:{}},i=function(t,e){var r,i;return e instanceof f?(d.push(e),a.push(n(t,d.length-1))):e===Object(e)&&"function"!=typeof e?(i=function(t){return function(n){var r;return r=c(e),l(n,t,r),n.push(r)}},r=function(t){return t.pop()},a.push(i(t)),s(e),a.push(r)):a.push(o(t,e))},s=function(t){return G.each(t,i)},s(e),r=function(t){var n,r,i,s,o;for(i=c(e),n=[i],s=0,o=a.length;o>s;s++)r=a[s],r(n,t);return i},t.combineAsArray(d).map(r)},u=function(){function t(){}return t.prototype.isEvent=function(){return!0},t.prototype.isEnd=function(){return!1},t.prototype.isInitial=function(){return!1},t.prototype.isNext=function(){return!1},t.prototype.isError=function(){return!1},t.prototype.hasValue=function(){return!1},t.prototype.filter=function(){return!0},t}(),l=function(t){function e(t){this.value=F(t)?G.cached(t):G.always(t)}return ie(e,t),e.prototype.isNext=function(){return!0},e.prototype.hasValue=function(){return!0},e.prototype.fmap=function(t){var e=this;return this.apply(function(){return t(e.value())})},e.prototype.apply=function(t){return new e(t)},e.prototype.filter=function(t){return t(this.value())},e.prototype.describe=function(){return this.value()},e}(u),c=function(t){function e(){return te=e.__super__.constructor.apply(this,arguments)}return ie(e,t),e.prototype.isInitial=function(){return!0},e.prototype.isNext=function(){return!1},e.prototype.apply=function(t){return new e(t)},e.prototype.toNext=function(){return new l(this.value)},e}(l),s=function(t){function e(){return ee=e.__super__.constructor.apply(this,arguments)}return ie(e,t),e.prototype.isEnd=function(){return!0},e.prototype.fmap=function(){return this},e.prototype.apply=function(){return this},e.prototype.describe=function(){return"<end>"},e}(u),o=function(t){function e(t){this.error=t}return ie(e,t),e.prototype.isError=function(){return!0},e.prototype.fmap=function(){return this},e.prototype.apply=function(){return this},e.prototype.describe=function(){return"<error> "+this.error},e}(u),f=function(){function e(){this.combine=se(this.combine,this),this.flatMapLatest=se(this.flatMapLatest,this),this.fold=se(this.fold,this),this.scan=se(this.scan,this),this.assign=this.onValue}return e.prototype.onValue=function(){var t;return t=M(arguments),this.subscribe(function(e){return e.hasValue()?t(e.value()):void 0})},e.prototype.onValues=function(t){return this.onValue(function(e){return t.apply(null,e)})},e.prototype.onError=function(){var t;return t=M(arguments),this.subscribe(function(e){return e.isError()?t(e.error):void 0})},e.prototype.onEnd=function(){var t;return t=M(arguments),this.subscribe(function(e){return e.isEnd()?t():void 0})},e.prototype.errors=function(){return this.filter(function(){return!1})},e.prototype.filter=function(){var e,n;return n=arguments[0],e=arguments.length>=2?ne.call(arguments,1):[],I(this,n,e,function(e){return this.withHandler(function(n){return n.filter(e)?this.push(n):t.more})})},e.prototype.takeWhile=function(){var e,n;return n=arguments[0],e=arguments.length>=2?ne.call(arguments,1):[],I(this,n,e,function(e){return this.withHandler(function(n){return n.filter(e)?this.push(n):(this.push(T()),t.noMore)})})},e.prototype.endOnError=function(){var t,e;return e=arguments[0],t=arguments.length>=2?ne.call(arguments,1):[],null==e&&(e=!0),I(this,e,t,function(t){return this.withHandler(function(e){return e.isError()&&t(e.error)?(this.push(e),this.push(T())):this.push(e)})})},e.prototype.take=function(e){return 0>=e?t.never():this.withHandler(function(n){return n.hasValue()?(e--,e>0?this.push(n):(0===e&&this.push(n),this.push(T()),t.noMore)):this.push(n)})},e.prototype.map=function(){var t,e;return e=arguments[0],t=arguments.length>=2?ne.call(arguments,1):[],e instanceof p?e.sampledBy(this,C):I(this,e,t,function(t){return this.withHandler(function(e){return this.push(e.fmap(t))})})},e.prototype.mapError=function(){var t;return t=M(arguments),this.withHandler(function(e){return e.isError()?this.push(J(t(e.error))):this.push(e)})},e.prototype.mapEnd=function(){var e;return e=M(arguments),this.withHandler(function(n){return n.isEnd()?(this.push(J(e(n))),this.push(T()),t.noMore):this.push(n)})},e.prototype.doAction=function(){var t;return t=M(arguments),this.withHandler(function(e){return e.hasValue()&&t(e.value()),this.push(e)})},e.prototype.skip=function(e){return this.withHandler(function(n){return n.hasValue()?e>0?(e--,t.more):this.push(n):this.push(n)})},e.prototype.skipDuplicates=function(t){return null==t&&(t=function(t,e){return t===e}),this.withStateMachine(d,function(e,n){return n.hasValue()?n.isInitial()||e===d||!t(e.get(),n.value())?[new v(n.value()),[n]]:[e,[]]:[e,[n]]})},e.prototype.skipErrors=function(){return this.withHandler(function(e){return e.isError()?t.more:this.push(e)})},e.prototype.withStateMachine=function(e,n){var r;return r=e,this.withHandler(function(e){var i,s,o,u,a,c,l;for(i=n(r,e),s=i[0],u=i[1],r=s,a=t.more,c=0,l=u.length;l>c;c++)if(o=u[c],a=this.push(o),a===t.noMore)return a;return a})},e.prototype.scan=function(e,n,r){var i,s,o,u=this;return s=R(n),n=r?s:function(t,e){return s(t(),e())},i=K(e).map(function(t){return G.always(t)}),o=function(e){var r,s,o,a;return r=!1,a=P,s=t.more,o=function(){return r?void 0:(r=!0,i.forEach(function(n){return s=e(new c(n)),s===t.noMore?(a(),a=P):void 0}))},a=u.subscribe(function(u){var a,c;return u.hasValue()?r&&u.isInitial()?t.more:(u.isInitial()||o(),r=!0,c=i.getOrElse(function(){return void 0}),a=G.cached(function(){return n(c,u.value)}),i=new v(a),e(u.apply(a))):(u.isEnd()&&(s=o()),s!==t.noMore?e(u):void 0)}),o(),a},new p(o)},e.prototype.fold=function(t,e){return this.scan(t,e).sampledBy(this.filter(!1).mapEnd().toProperty())},e.prototype.zip=function(e,n){return null==n&&(n=Array),t.zipWith([this,e],n)},e.prototype.diff=function(t,e){return e=R(e),this.scan([t],function(t,n){return[n,e(t[0],n)]}).filter(function(t){return 2===t.length}).map(function(t){return t[1]})},e.prototype.flatMap=function(n,i){var s;return n=L(n),s=this,new a(function(o){var u,a;return a=new r,u=function(t){return t(),a.empty()?o(T()):void 0},a.add(function(r,l){return s.subscribe(function(r){var s;return r.isEnd()?u(l):r.isError()?o(r):i&&a.count()>1?t.more:a.unsubscribed?t.noMore:(s=n(r.value()),s instanceof e||(s=t.once(s)),a.add(function(e,n){return s.subscribe(function(r){var i;return r.isEnd()?(u(n),t.noMore):(r instanceof c&&(r=r.toNext()),i=o(r),i===t.noMore&&e(),i)})}))})}),a.unsubscribe})},e.prototype.flatMapFirst=function(t){return this.flatMap(t,!0)},e.prototype.flatMapLatest=function(t){var e;return t=L(t),e=this.toEventStream(),e.flatMap(function(n){return t(n).takeUntil(e)})},e.prototype.not=function(){return this.map(function(t){return!t})},e.prototype.log=function(){var t;return t=arguments.length>=1?ne.call(arguments,0):[],this.subscribe(function(e){return"undefined"!=typeof console&&null!==console?"function"==typeof console.log?console.log.apply(console,ne.call(t).concat([e.describe()])):void 0:void 0}),this},e.prototype.slidingWindow=function(t,e){return null==e&&(e=0),this.scan([],function(e,n){return e.concat([n]).slice(-t)}).filter(function(t){return t.length>=e})},e.prototype.combine=function(e,n){var r;return r=R(n),t.combineAsArray(this,e).map(function(t){return r(t[0],t[1])})},e.prototype.decode=function(e){return this.combine(t.combineTemplate(e),function(t,e){return e[t]})},e.prototype.awaiting=function(t){return this.toEventStream().map(!0).merge(t.toEventStream().map(!1)).toProperty(!1)},e}(),f.prototype.reduce=f.prototype.fold,a=function(e){function n(t){this.takeUntil=se(this.takeUntil,this),this.sampledBy=se(this.sampledBy,this);var e;n.__super__.constructor.call(this),x(t),e=new i(t),this.subscribe=e.subscribe,this.subscribeInternal=this.subscribe,this.hasSubscribers=e.hasSubscribers}return ie(n,e),n.prototype.delay=function(e){return this.flatMap(function(n){return t.later(e,n)})},n.prototype.debounce=function(e){return this.flatMapLatest(function(n){return t.later(e,n)})},n.prototype.debounceImmediate=function(e){return this.flatMapFirst(function(n){return t.once(n).concat(t.later(e).filter(!1))})},n.prototype.throttle=function(t){return this.bufferWithTime(t).map(function(t){return t[t.length-1]})},n.prototype.bufferWithTime=function(t){return this.bufferWithTimeOrCount(t,Number.MAX_VALUE)},n.prototype.bufferWithCount=function(t){return this.bufferWithTimeOrCount(void 0,t)},n.prototype.bufferWithTimeOrCount=function(t,e){var n;return n=function(n){return n.values.length===e?n.flush():void 0!==t?n.schedule():void 0},this.buffer(t,n,n)},n.prototype.buffer=function(e,n,r){var i,s,o;return null==n&&(n=function(){}),null==r&&(r=function(){}),i={scheduled:!1,end:null,values:[],flush:function(){var e;if(this.scheduled=!1,this.values.length>0){if(e=this.push(J(this.values)),this.values=[],null!=this.end)return this.push(this.end);if(e!==t.noMore)return r(this)}else if(null!=this.end)return this.push(this.end)},schedule:function(){var t=this;return this.scheduled?void 0:(this.scheduled=!0,e(function(){return t.flush()}))}},o=t.more,F(e)||(s=e,e=function(e){return t.scheduler.setTimeout(e,s)}),this.withHandler(function(t){return i.push=this.push,t.isError()?o=this.push(t):t.isEnd()?(i.end=t,i.scheduled||i.flush()):(i.values.push(t.value()),n(i)),o})},n.prototype.merge=function(e){var r;return $(e),r=this,new n(function(n){var i,s;return i=0,s=function(e){return function(r){return e.subscribe(function(e){var s;return e.isEnd()?(i++,2===i?n(T()):t.more):(s=n(e),s===t.noMore&&r(),s)})}},E(s(r),s(e))})},n.prototype.toProperty=function(t){return 0===arguments.length&&(t=d),this.scan(t,q,!0)},n.prototype.toEventStream=function(){return this},n.prototype.sampledBy=function(t,e){return this.toProperty().sampledBy(t,e)},n.prototype.concat=function(t){var e;return e=this,new n(function(n){var r;return r=e.subscribe(function(e){return e.isEnd()?r=t.subscribe(n):n(e)}),function(){return r()}})},n.prototype.takeUntil=function(e){var r;return r=this,new n(function(n){var i,s;return s=function(r){return e.onValue(function(){return n(T()),r(),t.noMore})},i=function(e){return r.subscribe(function(r){var i;return i=n(r),(r.isEnd()||i===t.noMore)&&e(),i})},E(s,i)})},n.prototype.skipUntil=function(t){var e;return e=t.take(1).map(!0).toProperty(!1),this.filter(e)},n.prototype.skipWhile=function(){var e,n,r;return n=arguments[0],e=arguments.length>=2?ne.call(arguments,1):[],r=!1,I(this,n,e,function(e){return this.withHandler(function(n){return!r&&n.hasValue()&&e(n.value())?t.more:(n.hasValue()&&(r=!0),this.push(n))})})},n.prototype.startWith=function(e){return t.once(e).concat(this)},n.prototype.withHandler=function(t){var e;return e=new i(this.subscribe,t),new n(e.subscribe)},n.prototype.withSubscribe=function(t){return new n(t)},n}(f),p=function(e){function n(e,r){this.toEventStream=se(this.toEventStream,this),this.toProperty=se(this.toProperty,this),this.changes=se(this.changes,this),this.sample=se(this.sample,this);var i=this;n.__super__.constructor.call(this),this.subscribeInternal=r===!0?e:new b(e,r).subscribe,this.sampledBy=function(e,r){var s,o,u,a;return null!=r?r=R(r):(s=!0,r=function(t){return t()}),a=new m(i,!1,!1,i.subscribeInternal,s),o=new m(e,!0,!1,e.subscribe,s),u=t.when([a,o],r),e instanceof n?u.toProperty():u},this.subscribe=function(e){var n,r,s,o,u;return s=t.more,n=function(){function n(){}return n.prototype.set=function(t){return this.event=t},n.prototype.send=function(){var n;return n=this.event,this.event=null,null!=n&&s!==t.noMore&&(s=e(n),s===t.noMore)?o():void 0},n}(),u=new n,r=new n,o=P,o=i.subscribeInternal(function(n){return n.isError()?s!==t.noMore&&(s=e(n)):(n.hasValue()?u.set(n):n.isEnd()&&r.set(n),h.onDone(function(){return u.send(),r.send()})),s}),function(){return s=t.noMore,o()}}}return ie(n,e),n.prototype.sample=function(e){return this.sampledBy(t.interval(e,{}))},n.prototype.changes=function(){var t=this;return new a(function(e){return t.subscribe(function(t){return t.isInitial()?void 0:e(t)})})},n.prototype.withHandler=function(t){return new n(this.subscribeInternal,t)},n.prototype.withSubscribe=function(t){return new n(t)},n.prototype.toProperty=function(){return k(arguments),this},n.prototype.toEventStream=function(){var t=this;return new a(function(e){return t.subscribe(function(t){return t.isInitial()&&(t=t.toNext()),e(t)})})},n.prototype.and=function(t){return this.combine(t,function(t,e){return t&&e})},n.prototype.or=function(t){return this.combine(t,function(t,e){return t||e})},n.prototype.delay=function(t){return this.delayChanges(function(e){return e.delay(t)})},n.prototype.debounce=function(t){return this.delayChanges(function(e){return e.debounce(t)})},n.prototype.throttle=function(t){return this.delayChanges(function(e){return e.throttle(t)})},n.prototype.delayChanges=function(t){return g(this,t(this.changes()))},n.prototype.takeUntil=function(t){var e;return e=this.changes().takeUntil(t),g(this,e)},n.prototype.startWith=function(t){return this.scan(t,function(t,e){return e})},n}(f),I=function(t,e,n,r){var i;return e instanceof p?(i=e.sampledBy(t,function(t,e){return[t,e]}),r.apply(i,[function(t){var e,n;return e=t[0],n=t[1],e}]).map(function(t){var e,n;return e=t[0],n=t[1]})):(e=B(e,n),r.apply(t,[e]))},g=function(e,n){var r;return r=function(e){var n;return n=d,e.subscribe(function(e){return e.hasValue()&&(n=new v(e.value())),t.noMore}),n},n.toProperty(r(e))},i=function(){function e(e,n){var r,i,s,o,u,a,c,l,d,f=this;null==e&&(e=function(){return P}),c=[],u=null,o=!1,i=!1,this.hasSubscribers=function(){return c.length>0},s=null,l=P,a=function(t){return c=G.without(t,c)},d=null,r=function(){var t,e,n,r,i;if(null!=d){for(e=d,d=null,i=[],n=0,r=e.length;r>n;n++)t=e[n],i.push(t());return i}},this.push=function(e){var n,i,l,d,p,b;if(o)return u=(u||[]).concat([e]),t.more;if(e!==s){e.isError()&&(s=e),l=!1;try{for(o=!0,d=c,p=0,b=d.length;b>p;p++)i=d[p],n=i.sink(e),(n===t.noMore||e.isEnd())&&a(i);l=!0}finally{o=!1,l||(u=null)}for(l=!0;null!=u?u.length:void 0;)e=G.head(u),u=G.tail(u),f.push(e);return r(e),f.hasSubscribers()?t.more:t.noMore}},null==n&&(n=function(t){return this.push(t)}),this.handleEvent=function(t){return t.isEnd()&&(i=!0),n.apply(f,[t])},this.subscribe=function(t){var n;return i?(t(T()),P):(x(t),n={sink:t},c=c.concat(n),1===c.length&&(l=e(f.handleEvent)),x(l),function(){return a(n),f.hasSubscribers()?void 0:l()})}}return e}(),b=function(e){function n(e,r){var i,s,o,u=this;n.__super__.constructor.call(this,e,r),i=d,o=this.push,e=this.subscribe,s=!1,this.push=function(t){return t.isEnd()&&(s=!0),t.hasValue()&&(i=new v(t.value)),h.inTransaction(function(){return o.apply(u,[t])})},this.subscribe=function(n){var r,o,a;return r=!1,a=function(){return u.hasSubscribers()||s},o=i.filter(a).map(function(t){return n(O(t()))}),o.getOrElse(t.more)===t.noMore?P:s?(n(T()),P):e.apply(u,[n])}}return ie(n,e),n}(i),h=function(){var t,e,n,r;return r=[],n=!1,e=function(t){return n?r.push(t):t()},t=function(t){var e,i,s,o,u;if(n)return t();n=!0;try{s=t()}finally{n=!1}for(i=r,r=[],o=0,u=i.length;u>o;o++)e=i[o],e();return s},{onDone:e,inTransaction:t}}(),n=function(e){function n(){var e,r,i,s,u,a,c,l;i=void 0,a=[],e=!1,r=function(e){return function(n){return n.isEnd()?(l(e),t.noMore):i(n)}},c=function(){var t,e,n,r;for(r=[],e=0,n=a.length;n>e;e++)t=a[e],r.push("function"==typeof t.unsub?t.unsub():void 0);return r},u=function(t){return t.unsub=t.input.subscribe(r(t.input))},l=function(t){var e,n,r,i;for(e=r=0,i=a.length;i>r;e=++r)if(n=a[e],n.input===t)return"function"==typeof n.unsub&&n.unsub(),a.splice(e,1),void 0},s=function(t){var e,n,r,s;for(i=t,s=S(a),n=0,r=s.length;r>n;n++)e=s[n],u(e);return c},n.__super__.constructor.call(this,s),this.plug=function(t){var n;if(!e)return n={input:t},a.push(n),null!=i&&u(n),function(){return l(t)}},this.push=function(t){return"function"==typeof i?i(J(t)):void 0},this.error=function(t){return"function"==typeof i?i(new o(t)):void 0},this.end=function(){return e=!0,c(),"function"==typeof i?i(T()):void 0}}return ie(n,e),n}(a),m=function(){function t(t,e,n,r,i){var s,o;this.sync=e,this.subscribe=r,null==i&&(i=!1),o=[],s=i?G.id:function(t){return t()},null==this.subscribe&&(this.subscribe=t.subscribe),this.markEnded=function(){return this.ended=!0},n?(this.consume=function(){return s(o.shift())},this.push=function(t){return o.push(t)},this.mayHave=function(t){return!this.ended||o.length>=t},this.hasAtLeast=function(t){return o.length>=t}):(this.consume=function(){return s(o[0])},this.push=function(t){return o=[t]},this.mayHave=function(){return!0},this.hasAtLeast=function(){return o.length})}return t}(),m.fromObservable=function(t){return t instanceof m?t:t instanceof p?new m(t,!1,!1):new m(t,!0,!0)},t.when=function(){var e,n,r,i,s,o,u,c,l,d,p,b,h,v,g,w,j;if(l=arguments.length>=1?ne.call(arguments,0):[],0===l.length)return t.never();for(s=l.length,b="when: expecting arguments in the form (Observable+,function)+",y(b,0===s%2),p=[],c=[],n=0;s>n;){for(u=G.toArray(l[n]),e=l[n+1],o={f:F(e)?e:function(){return e},ixs:[]},h=0,g=u.length;g>h;h++){for(d=u[h],y(d instanceof f,b),r=p.indexOf(d),0>r&&(p.push(d),r=p.length-1),j=o.ixs,v=0,w=j.length;w>v;v++)i=j[v],i.index===r&&i.count++;o.ixs.push({index:r,count:1})}u.length>0&&c.push(o),n+=2}return p.length?(p=G.map(m.fromObservable,p),new a(function(e){var r,i,s,o;
return s=function(t){return G.all(t.ixs,function(t){return p[t.index].hasAtLeast(t.count)})},i=function(t){return!t.sync||t.ended},r=function(t){return G.any(t.ixs,function(t){return!p[t.index].mayHave(t.count)})},o=function(o){return function(u){return o.subscribe(function(a){var l,d,f,b,h;if(a.isEnd())o.markEnded(),(G.all(p,i)||G.all(c,r))&&(d=t.noMore,e(T()));else if(a.isError())d=e(a);else if(o.push(a.value),o.sync)for(b=0,h=c.length;h>b;b++)if(l=c[b],s(l)){f=function(){return l.f.apply(l,function(){var t,e,r,i;for(r=l.ixs,i=[],t=0,e=r.length;e>t;t++)n=r[t],i.push(p[n.index].consume());return i}())},d=e(a.apply(f));break}return d===t.noMore&&u(),d||t.more})}},E.apply(null,function(){var t,e,r;for(r=[],n=t=0,e=p.length;e>t;n=++t)d=p[n],r.push(o(d,n));return r}())})):t.never()},t.update=function(){var e,n,r,i;for(n=arguments[0],i=arguments.length>=2?ne.call(arguments,1):[],r=function(t){return function(){var e;return e=arguments.length>=1?ne.call(arguments,0):[],function(n){return t.apply(null,[n].concat(e))}}},e=i.length-1;e>0;)i[e]instanceof Function||(i[e]=function(t){return function(){return t}}(i[e])),i[e]=r(i[e]),e-=2;return t.when.apply(t,i).scan(n,function(t,e){return e(t)})},E=function(){var t;return t=arguments.length>=1?ne.call(arguments,0):[],new r(t).unsubscribe},r=function(){function t(t){var e,n,r;for(null==t&&(t=[]),this.empty=se(this.empty,this),this.count=se(this.count,this),this.unsubscribe=se(this.unsubscribe,this),this.add=se(this.add,this),this.unsubscribed=!1,this.subscriptions=[],this.starting=[],n=0,r=t.length;r>n;n++)e=t[n],this.add(e)}return t.prototype.add=function(t){var e,n,r,i=this;if(!this.unsubscribed)return e=!1,n=P,this.starting.push(t),r=function(){return i.unsubscribed?void 0:(n(),e=!0,i.remove(n),G.remove(t,i.starting))},n=t(this.unsubscribe,r),this.unsubscribed||e||this.subscriptions.push(n),G.remove(t,this.starting),n},t.prototype.remove=function(t){return this.unsubscribed?void 0:G.remove(t,this.subscriptions)},t.prototype.unsubscribe=function(){var t,e,n,r;if(!this.unsubscribed){for(this.unsubscribed=!0,r=this.subscriptions,e=0,n=r.length;n>e;e++)t=r[e],t();return this.subscriptions=[],this.starting=[]}},t.prototype.count=function(){return this.unsubscribed?0:this.subscriptions.length+this.starting.length},t.prototype.empty=function(){return 0===this.count()},t}(),v=function(){function t(t){this.value=t}return t.prototype.getOrElse=function(){return this.value},t.prototype.get=function(){return this.value},t.prototype.filter=function(e){return e(this.value)?new t(this.value):d},t.prototype.map=function(e){return new t(e(this.value))},t.prototype.forEach=function(t){return t(this.value)},t.prototype.isDefined=!0,t.prototype.toArray=function(){return[this.value]},t}(),d={getOrElse:function(t){return t},filter:function(){return d},map:function(){return d},forEach:function(){},isDefined:!1,toArray:function(){return[]}},t.EventStream=a,t.Property=p,t.Observable=f,t.Bus=n,t.Initial=c,t.Next=l,t.End=s,t.Error=o,P=function(){},q=function(t,e){return e()},C=function(t){return t},O=function(t){return new c(G.always(t))},J=function(t){return new l(G.always(t))},T=function(){return new s},W=function(t){return t instanceof u?t:J(t)},S=function(t){return t.slice(0)},A=Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){var n,r,i,s;for(n=i=0,s=t.length;s>i;n=++i)if(r=t[n],e===r)return n;return-1},y=function(t,e){if(!e)throw t},j=function(t){return y("not an event : "+t,t instanceof u&&t.isEvent())},$=function(t){return y("not an EventStream : "+t,t instanceof a)},x=function(t){return y("not a function : "+t,F(t))},F=function(t){return"function"==typeof t},w=function(t){return y("not an array : "+t,t instanceof Array)},k=function(t){return y("no arguments supported",0===t.length)},_=function(t){return y("not a string : "+t,"string"==typeof t)},H=function(t,e){return function(){var n;return n=arguments.length>=1?ne.call(arguments,0):[],t.apply(null,e.concat(n))}},L=function(t){return t instanceof f&&(t=G.always(t)),x(t),t},M=function(t){return t=Array.prototype.slice.call(t),V.apply(null,t)},V=Z(function(){var t,e;return e=arguments[0],t=arguments.length>=2?ne.call(arguments,1):[],F(e)?t.length?H(e,t):e:D(e)?z(e,t):G.always(e)}),B=function(t,e){return V.apply(null,[t].concat(ne.call(e)))},D=function(t){return"string"==typeof t&&t.length>1&&"."===t.charAt(0)},t.isFieldKey=D,z=function(t,e){var n,r;return r=t.slice(1).split("."),n=G.map(Q(e),r),function(e){var r,i;for(r=0,i=n.length;i>r;r++)t=n[r],e=t(e);return e}},Q=function(t){return function(e){return function(n){var r;return null==n?void 0:(r=n[e],F(r)?r.apply(n,t):r)}}},Y=function(t){return t.slice(1)},R=function(t){var e;return F(t)?t:D(t)?(e=Y(t),function(t,n){return t[e](n)}):y("not a function or a field key: "+t,!1)},K=function(t){return t instanceof v||t===d?t:new v(t)},G={head:function(t){return t[0]},always:function(t){return function(){return t}},negate:function(t){return function(e){return!t(e)}},empty:function(t){return 0===t.length},tail:function(t){return t.slice(1,t.length)},filter:function(t,e){var n,r,i,s;for(n=[],i=0,s=e.length;s>i;i++)r=e[i],t(r)&&n.push(r);return n},map:function(t,e){var n,r,i,s;for(s=[],r=0,i=e.length;i>r;r++)n=e[r],s.push(t(n));return s},each:function(t,e){var n,r,i;i=[];for(n in t)r=t[n],i.push(e(n,r));return i},toArray:function(t){return t instanceof Array?t:[t]},contains:function(t,e){return-1!==A(t,e)},id:function(t){return t},last:function(t){return t[t.length-1]},all:function(t,e){var n,r,i;for(null==e&&(e=G.id),r=0,i=t.length;i>r;r++)if(n=t[r],!e(n))return!1;return!0},any:function(t,e){var n,r,i;for(null==e&&(e=G.id),r=0,i=t.length;i>r;r++)if(n=t[r],e(n))return!0;return!1},without:function(t,e){return G.filter(function(e){return e!==t},e)},remove:function(t,e){var n;return n=A(e,t),n>=0?e.splice(n,1):void 0},fold:function(t,e,n){var r,i,s;for(i=0,s=t.length;s>i;i++)r=t[i],e=n(e,r);return e},cached:function(t){var e;return e=d,function(){return e===d&&(e=t(),t=null),e}}},t._=G,t.scheduler={setTimeout:function(t,e){return setTimeout(t,e)},setInterval:function(t,e){return setInterval(t,e)},clearInterval:function(t){return clearInterval(t)},now:function(){return(new Date).getTime()}},e!==void 0&&null!==e?(e.exports=t,t.Bacon=t):("undefined"!=typeof define&&null!==define&&null!=define.amd&&define([],function(){return t}),this.Bacon=t)}).call(this)},{}],nLm5Ax:[function(t,e,n){var r={};(function(t,e){function n(t){return(null===t||void 0===t?"":t)+""}function r(t){return t=n(t),c.test(t)?t.replace(i,"&amp;").replace(s,"&lt;").replace(o,"&gt;").replace(u,"&#39;").replace(a,"&quot;"):t}t.Template=function(t,n,r,i){this.r=t||this.r,this.c=r,this.options=i,this.text=n||"",this.buf=e?[]:""},t.Template.prototype={r:function(){return""},v:r,t:n,render:function(t,e,n){return this.ri([t],e||{},n)},ri:function(t,e,n){return this.r(t,e,n)},rp:function(t,e,n,r){var i=n[t];return i?(this.c&&"string"==typeof i&&(i=this.c.compile(i,this.options)),i.ri(e,n,r)):""},rs:function(t,e,n){var r=t[t.length-1];if(!l(r))return n(t,e,this),void 0;for(var i=0;r.length>i;i++)t.push(r[i]),n(t,e,this),t.pop()},s:function(t,e,n,r,i,s,o){var u;return l(t)&&0===t.length?!1:("function"==typeof t&&(t=this.ls(t,e,n,r,i,s,o)),u=""===t||!!t,!r&&u&&e&&e.push("object"==typeof t?t:e[e.length-1]),u)},d:function(t,e,n,r){var i=t.split("."),s=this.f(i[0],e,n,r),o=null;if("."===t&&l(e[e.length-2]))return e[e.length-1];for(var u=1;i.length>u;u++)s&&"object"==typeof s&&i[u]in s?(o=s,s=s[i[u]]):s="";return r&&!s?!1:(r||"function"!=typeof s||(e.push(o),s=this.lv(s,e,n),e.pop()),s)},f:function(t,e,n,r){for(var i=!1,s=null,o=!1,u=e.length-1;u>=0;u--)if(s=e[u],s&&"object"==typeof s&&t in s){i=s[t],o=!0;break}return o?(r||"function"!=typeof i||(i=this.lv(i,e,n)),i):r?!1:""},ho:function(t,e,n,r,i){var s=this.c,o=this.options;o.delimiters=i;var r=t.call(e,r);return r=null==r?r+"":""+r,this.b(s.compile(r,o).render(e,n)),!1},b:e?function(t){this.buf.push(t)}:function(t){this.buf+=t},fl:e?function(){var t=this.buf.join("");return this.buf=[],t}:function(){var t=this.buf;return this.buf="",t},ls:function(t,e,n,r,i,s,o){var u=e[e.length-1],a=null;if(!r&&this.c&&t.length>0)return this.ho(t,u,n,this.text.substring(i,s),o);if(a=t.call(u),"function"==typeof a){if(r)return!0;if(this.c)return this.ho(a,u,n,this.text.substring(i,s),o)}return a},lv:function(t,e,r){var i=e[e.length-1],s=t.call(i);return"function"==typeof s&&(s=n(s.call(i)),this.c&&~s.indexOf("{{"))?this.c.compile(s,this.options).render(i,r):n(s)}};var i=/&/g,s=/</g,o=/>/g,u=/\'/g,a=/\"/g,c=/[&<>\"\']/,l=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}})(n!==void 0?n:r),function(t){function e(t){"}"===t.n.substr(t.n.length-1)&&(t.n=t.n.substring(0,t.n.length-1))}function n(t){return t.trim?t.trim():t.replace(/^\s*|\s*$/g,"")}function r(t,e,n){if(e.charAt(n)!=t.charAt(0))return!1;for(var r=1,i=t.length;i>r;r++)if(e.charAt(n+r)!=t.charAt(r))return!1;return!0}function i(t,e,n,r){for(var u=[],a=null,c=null;t.length>0;)if(c=t.shift(),"#"==c.tag||"^"==c.tag||s(c,r))n.push(c),c.nodes=i(t,c.tag,n,r),u.push(c);else{if("/"==c.tag){if(0===n.length)throw Error("Closing tag without opener: /"+c.n);if(a=n.pop(),c.n!=a.n&&!o(c.n,a.n,r))throw Error("Nesting error: "+a.n+" vs. "+c.n);return a.end=c.i,u}u.push(c)}if(n.length>0)throw Error("missing closing tag: "+n.pop().n);return u}function s(t,e){for(var n=0,r=e.length;r>n;n++)if(e[n].o==t.n)return t.tag="#",!0}function o(t,e,n){for(var r=0,i=n.length;i>r;r++)if(n[r].c==t&&n[r].o==e)return!0}function u(t){return t.replace(w,"\\\\").replace(m,'\\"').replace(g,"\\n").replace(y,"\\r")}function a(t){return~t.indexOf(".")?"d":"f"}function c(t){for(var e="",n=0,r=t.length;r>n;n++){var i=t[n].tag;"#"==i?e+=l(t[n].nodes,t[n].n,a(t[n].n),t[n].i,t[n].end,t[n].otag+" "+t[n].ctag):"^"==i?e+=d(t[n].nodes,t[n].n,a(t[n].n)):"<"==i||">"==i?e+=f(t[n]):"{"==i||"&"==i?e+=p(t[n].n,a(t[n].n)):"\n"==i?e+=h('"\\n"'+(t.length-1==n?"":" + i")):"_v"==i?e+=b(t[n].n,a(t[n].n)):void 0===i&&(e+=h('"'+u(t[n])+'"'))}return e}function l(t,e,n,r,i,s){return"if(_.s(_."+n+'("'+u(e)+'",c,p,1),'+"c,p,0,"+r+","+i+',"'+s+'")){'+"_.rs(c,p,"+"function(c,p,_){"+c(t)+"});c.pop();}"}function d(t,e,n){return"if(!_.s(_."+n+'("'+u(e)+'",c,p,1),c,p,1,0,0,"")){'+c(t)+"};"}function f(t){return'_.b(_.rp("'+u(t.n)+'",c,p,"'+(t.indent||"")+'"));'}function p(t,e){return"_.b(_.t(_."+e+'("'+u(t)+'",c,p,0)));'}function b(t,e){return"_.b(_.v(_."+e+'("'+u(t)+'",c,p,0)));'}function h(t){return"_.b("+t+");"}var v=/\S/,m=/\"/g,g=/\n/g,y=/\r/g,w=/\\/g,j={"#":1,"^":2,"/":3,"!":4,">":5,"<":6,"=":7,_v:8,"{":9,"&":10};t.scan=function(t,i){function s(){m.length>0&&(g.push(new String(m)),m="")}function o(){for(var t=!0,e=$;g.length>e;e++)if(t=g[e].tag&&j[g[e].tag]<j._v||!g[e].tag&&null===g[e].match(v),!t)return!1;return t}function u(t,e){if(s(),t&&o())for(var n,r=$;g.length>r;r++)g[r].tag||((n=g[r+1])&&">"==n.tag&&(n.indent=""+g[r]),g.splice(r,1));else e||g.push({tag:"\n"});y=!1,$=g.length}function a(t,e){var r="="+k,i=t.indexOf(r,e),s=n(t.substring(t.indexOf("=",e)+1,i)).split(" ");return x=s[0],k=s[1],i+r.length-1}var c=t.length,l=0,d=1,f=2,p=l,b=null,h=null,m="",g=[],y=!1,w=0,$=0,x="{{",k="}}";for(i&&(i=i.split(" "),x=i[0],k=i[1]),w=0;c>w;w++)p==l?r(x,t,w)?(--w,s(),p=d):"\n"==t.charAt(w)?u(y):m+=t.charAt(w):p==d?(w+=x.length-1,h=j[t.charAt(w+1)],b=h?t.charAt(w+1):"_v","="==b?(w=a(t,w),p=l):(h&&w++,p=f),y=w):r(k,t,w)?(g.push({tag:b,n:n(m),otag:x,ctag:k,i:"/"==b?y-k.length:w+x.length}),m="",w+=k.length-1,p=l,"{"==b&&("}}"==k?w++:e(g[g.length-1]))):m+=t.charAt(w);return u(y,!0),g},t.generate=function(e,n,r){var i='var _=this;_.b(i=i||"");'+c(e)+"return _.fl();";return r.asString?"function(c,p,i){"+i+";}":new t.Template(Function("c","p","i",i),n,t,r)},t.parse=function(t,e,n){return n=n||{},i(t,"",[],n.sectionTags||[])},t.cache={},t.compile=function(t,e){e=e||{};var n=t+"||"+!!e.asString,r=this.cache[n];return r?r:(r=this.generate(this.parse(this.scan(t,e.delimiters),t,e),t,e),this.cache[n]=r)}}(n!==void 0?n:r)},{}]},{},[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,53,55,56,50,57,58]);
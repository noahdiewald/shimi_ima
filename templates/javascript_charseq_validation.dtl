function(newDoc, saveDoc, userCtx) {
  String.prototype.isBlank = function() {
    return ((/^\\s*$/).test(this) && !(/\\S/).test(this) && !(this === null));
  };
    
  var forbid = function(name, msg) {
    var errorMsg = JSON.stringify({
      fieldname: name,
      message: msg
    });

    throw({forbidden: errorMsg});
  };
  
  if (newDoc.category === 'charseq') {
    if (newDoc.name.isBlank()) forbid('Name', 'must be filled in.');
    
    [[newDoc.characters, 'Characters'], 
     [newDoc.sort_ignore, 'Ignore'], 
     [newDoc.vowels, 'Vowels], 
     [newDoc.consonants, 'Consonants']].forEach(function(item) {
      if (item[0] === false) forbid(item[1], 'contains quoting errors.');
    });
  }
}

%%-*- mode: erlang -*-
{deps, [
        {rvre, ".*", 
         {git, "https://github.com/noahdiewald/rvre.git", "master"}},
        {cowboy, "0\.8\.6", 
         {git, "https://github.com/extend/cowboy.git", "0.8.6"}},
        {mimetypes, ".*",
         {git, "git://github.com/spawngrid/mimetypes.git", "1.0"}},
        {icu4e, "1\.0\.0", 
         {git, "https://github.com/noahdiewald/icu4e.git", "master"}},
        {erlydtl, "0\.8\.0", 
         {git, "https://github.com/evanmiller/erlydtl.git", "0.8.0"}},
        {ibrowse, "4\.0\.1", 
         {git, "https://github.com/cmullaparthi/ibrowse.git", "v4.0.1"}},
        {bitcask, "1\.6\.2",
         {git, "https://github.com/basho/bitcask.git", "1.6.2"}}
       ]}.

{port_specs, [{"priv/icu_nif.so", ["c_src/*.c"]}]}.

{port_env, [
            {"DRV_LDFLAGS", "$DRV_LDFLAGS -licuuc -licui18n -licudata"}
           ]}.

{port_env, [
            {"CFLAGS", "$ICU_CFLAGS $CFLAGS $ICU_INC_PATH"},
            {"CXXFLAGS", "$ICU_CXXFLAGS $CXXFLAGS $ICU_INC_PATH"},
            {"LDFLAGS", "$ICU_LDFLAGS $LDFLAGS"}
           ]}.

{clean_files, ["priv/*.so", "c_src/*.o"]}.

{erlydtl_opts, [
                [{doc_root, "templates"}, 
                 {module_ext, "_dtl"}, 
                 {out_dir, "ebin"}], 
                {custom_filters_modules, [erlydtl_custom_filters]}, 
                {compiler_options, []}]}.
